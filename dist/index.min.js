var sf=Object.create;var or=Object.defineProperty;var ff=Object.getOwnPropertyDescriptor;var uf=Object.getOwnPropertyNames;var lf=Object.getPrototypeOf,hf=Object.prototype.hasOwnProperty;var P=(r,t)=>()=>(r&&(t=r(r=0)),t);var he=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),cf=(r,t)=>{for(var e in t)or(r,e,{get:t[e],enumerable:!0})},$i=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of uf(t))!hf.call(r,i)&&i!==e&&or(r,i,{get:()=>t[i],enumerable:!(n=ff(t,i))||n.enumerable});return r};var rt=(r,t,e)=>(e=r!=null?sf(lf(r)):{},$i(t||!r||!r.__esModule?or(e,"default",{value:r,enumerable:!0}):e,r)),pf=r=>$i(or({},"__esModule",{value:!0}),r);function Fi(){throw new Error("setTimeout has not been defined")}function Bi(){throw new Error("clearTimeout has not been defined")}function Oi(r){if(Ce===setTimeout)return setTimeout(r,0);if((Ce===Fi||!Ce)&&setTimeout)return Ce=setTimeout,setTimeout(r,0);try{return Ce(r,0)}catch(t){try{return Ce.call(null,r,0)}catch(e){return Ce.call(this,r,0)}}}function df(r){if(Re===clearTimeout)return clearTimeout(r);if((Re===Bi||!Re)&&clearTimeout)return Re=clearTimeout,clearTimeout(r);try{return Re(r)}catch(t){try{return Re.call(null,r)}catch(e){return Re.call(this,r)}}}function mf(){!it||!ze||(it=!1,ze.length?xe=ze.concat(xe):ar=-1,xe.length&&Pi())}function Pi(){if(!it){var r=Oi(mf);it=!0;for(var t=xe.length;t;){for(ze=xe,xe=[];++ar<t;)ze&&ze[ar].run();ar=-1,t=xe.length}ze=null,it=!1,df(r)}}function wf(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];xe.push(new Di(r,t)),xe.length===1&&!it&&Oi(Pi)}function Di(r,t){this.fun=r,this.array=t}function Le(){}function Uf(r){throw new Error("process.binding is not supported")}function Ff(){return"/"}function Bf(r){throw new Error("process.chdir is not supported")}function Of(){return 0}function Df(r){var t=Pf.call(nt)*.001,e=Math.floor(t),n=Math.floor(t%1*1e9);return r&&(e=e-r[0],n=n-r[1],n<0&&(e--,n+=1e9)),[e,n]}function Lf(){var r=new Date,t=r-zf;return t/1e3}var Ce,Re,xe,it,ze,ar,gf,_f,bf,xf,yf,vf,Ef,Tf,Af,Cf,Rf,Sf,kf,If,Nf,$f,nt,Pf,zf,y,Ui,m=P(()=>{Ce=Fi,Re=Bi;typeof globalThis.setTimeout=="function"&&(Ce=setTimeout);typeof globalThis.clearTimeout=="function"&&(Re=clearTimeout);xe=[],it=!1,ar=-1;Di.prototype.run=function(){this.fun.apply(null,this.array)};gf="browser",_f="browser",bf=!0,xf={},yf=[],vf="",Ef={},Tf={},Af={};Cf=Le,Rf=Le,Sf=Le,kf=Le,If=Le,Nf=Le,$f=Le;nt=globalThis.performance||{},Pf=nt.now||nt.mozNow||nt.msNow||nt.oNow||nt.webkitNow||function(){return new Date().getTime()};zf=new Date;y={nextTick:wf,title:gf,browser:bf,env:xf,argv:yf,version:vf,versions:Ef,on:Cf,addListener:Rf,once:Sf,off:kf,removeListener:If,removeAllListeners:Nf,emit:$f,binding:Uf,cwd:Ff,chdir:Bf,umask:Of,hrtime:Df,platform:_f,release:Tf,config:Af,uptime:Lf},Ui={};Object.keys(Ui).forEach(r=>{let t=r.split("."),e=y;for(let n=0;n<t.length;n++){let i=t[n];n===t.length-1?e[i]=Ui[r]:e=e[i]||(e[i]={})}})});function Vi(){en=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)ce[t]=r[t],ne[r.charCodeAt(t)]=t;ne["-".charCodeAt(0)]=62,ne["_".charCodeAt(0)]=63}function Vf(r){en||Vi();var t,e,n,i,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Mf(s*3/4-o),n=o>0?s-4:s;var l=0;for(t=0,e=0;t<n;t+=4,e+=3)i=ne[r.charCodeAt(t)]<<18|ne[r.charCodeAt(t+1)]<<12|ne[r.charCodeAt(t+2)]<<6|ne[r.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=i&255;return o===2?(i=ne[r.charCodeAt(t)]<<2|ne[r.charCodeAt(t+1)]>>4,a[l++]=i&255):o===1&&(i=ne[r.charCodeAt(t)]<<10|ne[r.charCodeAt(t+1)]<<4|ne[r.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=i&255),a}function Zf(r){return ce[r>>18&63]+ce[r>>12&63]+ce[r>>6&63]+ce[r&63]}function Yf(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(Zf(n));return i.join("")}function zi(r){en||Vi();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,s=0,l=e-n;s<l;s+=a)o.push(Yf(r,s,s+a>l?l:s+a));return n===1?(t=r[e-1],i+=ce[t>>2],i+=ce[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=ce[t>>10],i+=ce[t>>4&63],i+=ce[t<<2&63],i+="="),o.push(i),o.join("")}function sr(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ye(r,t){if(sr()<t)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=d.prototype):(r===null&&(r=new d(t)),r.length=t),r}function d(r,t,e){if(!d.TYPED_ARRAY_SUPPORT&&!(this instanceof d))return new d(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return tn(this,r)}return Zi(this,r,t,e)}function Zi(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Wf(r,t,e,n):typeof t=="string"?jf(r,t,e):qf(r,t)}function Yi(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Hf(r,t,e,n){return Yi(t),t<=0?ye(r,t):e!==void 0?typeof n=="string"?ye(r,t).fill(e,n):ye(r,t).fill(e):ye(r,t)}function tn(r,t){if(Yi(t),r=ye(r,t<0?0:rn(t)|0),!d.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}function jf(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!d.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=Hi(t,e)|0;r=ye(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function Qr(r,t){var e=t.length<0?0:rn(t.length)|0;r=ye(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Wf(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),d.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=d.prototype):r=Qr(r,t),r}function qf(r,t){if(pe(t)){var e=rn(t.length)|0;return r=ye(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||pu(t.length)?ye(r,0):Qr(r,t);if(t.type==="Buffer"&&Array.isArray(t.data))return Qr(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function rn(r){if(r>=sr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+sr().toString(16)+" bytes");return r|0}function pe(r){return!!(r!=null&&r._isBuffer)}function Hi(r,t){if(pe(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return fr(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Ji(r).length;default:if(n)return fr(r).length;t=(""+t).toLowerCase(),n=!0}}function Gf(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return ou(this,t,e);case"utf8":case"utf-8":return qi(this,t,e);case"ascii":return nu(this,t,e);case"latin1":case"binary":return iu(this,t,e);case"base64":return tu(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return au(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Me(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function ji(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=d.from(t,n)),pe(t))return t.length===0?-1:Li(r,t,e,n,i);if(typeof t=="number")return t=t&255,d.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Li(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function Li(r,t,e,n,i){var o=1,a=r.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(c,g){return o===1?c[g]:c.readUInt16BE(g*o)}var f;if(i){var u=-1;for(f=e;f<a;f++)if(l(r,f)===l(t,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===s)return u*o}else u!==-1&&(f-=f-u),u=-1}else for(e+s>a&&(e=a-s),f=e;f>=0;f--){for(var h=!0,p=0;p<s;p++)if(l(r,f+p)!==l(t,p)){h=!1;break}if(h)return f}return-1}function Kf(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;r[e+a]=s}return a}function Xf(r,t,e,n){return hr(fr(t,r.length-e),r,e,n)}function Wi(r,t,e,n){return hr(hu(t),r,e,n)}function Jf(r,t,e,n){return Wi(r,t,e,n)}function Qf(r,t,e,n){return hr(Ji(t),r,e,n)}function eu(r,t,e,n){return hr(cu(t,r.length-e),r,e,n)}function tu(r,t,e){return t===0&&e===r.length?zi(r):zi(r.slice(t,e))}function qi(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var l,f,u,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(h=(o&31)<<6|l&63,h>127&&(a=h));break;case 3:l=r[i+1],f=r[i+2],(l&192)===128&&(f&192)===128&&(h=(o&15)<<12|(l&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=r[i+1],f=r[i+2],u=r[i+3],(l&192)===128&&(f&192)===128&&(u&192)===128&&(h=(o&15)<<18|(l&63)<<12|(f&63)<<6|u&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=s}return ru(n)}function ru(r){var t=r.length;if(t<=Mi)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=Mi));return e}function nu(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function iu(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function ou(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=lu(r[o]);return i}function au(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function D(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}function q(r,t,e,n,i,o){if(!pe(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}function ur(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function lr(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}function Gi(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Ki(r,t,e,n,i){return i||Gi(r,t,e,4,34028234663852886e22,-34028234663852886e22),eo(r,t,e,n,23,4),e+4}function Xi(r,t,e,n,i){return i||Gi(r,t,e,8,17976931348623157e292,-17976931348623157e292),eo(r,t,e,n,52,8),e+8}function fu(r){if(r=uu(r).replace(su,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function uu(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function lu(r){return r<16?"0"+r.toString(16):r.toString(16)}function fr(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function hu(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function cu(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Ji(r){return Vf(fu(r))}function hr(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function pu(r){return r!==r}function du(r){return r!=null&&(!!r._isBuffer||Qi(r)||mu(r))}function Qi(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function mu(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Qi(r.slice(0,0))}function cr(r,t,e,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,f=l>>1,u=-7,h=e?i-1:0,p=e?-1:1,c=r[t+h];for(h+=p,o=c&(1<<-u)-1,c>>=-u,u+=s;u>0;o=o*256+r[t+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=a*256+r[t+h],h+=p,u-=8);if(o===0)o=1-f;else{if(o===l)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-f}return(c?-1:1)*a*Math.pow(2,o-n)}function eo(r,t,e,n,i,o){var a,s,l,f=o*8-i-1,u=(1<<f)-1,h=u>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,g=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a=a+h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;r[e+c]=s&255,c+=g,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;r[e+c]=a&255,c+=g,a/=256,f-=8);r[e+c-g]|=_*128}var ce,ne,Mf,en,Mi,su,to=P(()=>{m();w();ce=[],ne=[],Mf=typeof Uint8Array!="undefined"?Uint8Array:Array,en=!1;d.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;d.poolSize=8192;d._augment=function(r){return r.__proto__=d.prototype,r};d.from=function(r,t,e){return Zi(null,r,t,e)};d.kMaxLength=sr();d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&d[Symbol.species]);d.alloc=function(r,t,e){return Hf(null,r,t,e)};d.allocUnsafe=function(r){return tn(null,r)};d.allocUnsafeSlow=function(r){return tn(null,r)};d.isBuffer=du;d.compare=function(t,e){if(!pe(t)||!pe(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};d.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return d.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=d.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!pe(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};d.byteLength=Hi;d.prototype._isBuffer=!0;d.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Me(this,e,e+1);return this};d.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Me(this,e,e+3),Me(this,e+1,e+2);return this};d.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Me(this,e,e+7),Me(this,e+1,e+6),Me(this,e+2,e+5),Me(this,e+3,e+4);return this};d.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?qi(this,0,t):Gf.apply(this,arguments)};d.prototype.equals=function(t){if(!pe(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:d.compare(this,t)===0};d.prototype.compare=function(t,e,n,i,o){if(!pe(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-e,l=Math.min(a,s),f=this.slice(i,o),u=t.slice(e,n),h=0;h<l;++h)if(f[h]!==u[h]){a=f[h],s=u[h];break}return a<s?-1:s<a?1:0};d.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};d.prototype.indexOf=function(t,e,n){return ji(this,t,e,n,!0)};d.prototype.lastIndexOf=function(t,e,n){return ji(this,t,e,n,!1)};d.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Kf(this,t,e,n);case"utf8":case"utf-8":return Xf(this,t,e,n);case"ascii":return Wi(this,t,e,n);case"latin1":case"binary":return Jf(this,t,e,n);case"base64":return Qf(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return eu(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Mi=4096;d.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(d.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=d.prototype;else{var o=e-t;i=new d(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};d.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};d.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};d.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]};d.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8};d.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]};d.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};d.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};d.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};d.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};d.prototype.readInt8=function(t,e){return e||D(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};d.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};d.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};d.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};d.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};d.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),cr(this,t,!0,23,4)};d.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),cr(this,t,!1,23,4)};d.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),cr(this,t,!0,52,8)};d.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),cr(this,t,!1,52,8)};d.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;q(this,t,e,n,o,0)}var a=1,s=0;for(this[e]=t&255;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n};d.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;q(this,t,e,n,o,0)}var a=n-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n};d.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,1,255,0),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};d.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):ur(this,t,e,!0),e+2};d.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):ur(this,t,e,!1),e+2};d.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):lr(this,t,e,!0),e+4};d.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):lr(this,t,e,!1),e+4};d.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);q(this,t,e,n,o-1,-o)}var a=0,s=1,l=0;for(this[e]=t&255;++a<n&&(s*=256);)t<0&&l===0&&this[e+a-1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};d.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);q(this,t,e,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&l===0&&this[e+a+1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};d.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,1,127,-128),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};d.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):ur(this,t,e,!0),e+2};d.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):ur(this,t,e,!1),e+2};d.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):lr(this,t,e,!0),e+4};d.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):lr(this,t,e,!1),e+4};d.prototype.writeFloatLE=function(t,e,n){return Ki(this,t,e,!0,n)};d.prototype.writeFloatBE=function(t,e,n){return Ki(this,t,e,!1,n)};d.prototype.writeDoubleLE=function(t,e,n){return Xi(this,t,e,!0,n)};d.prototype.writeDoubleBE=function(t,e,n){return Xi(this,t,e,!1,n)};d.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!d.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};d.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var s=pe(t)?t:fr(new d(t,i).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};su=/[^+\/0-9A-Za-z-_]/g});var w=P(()=>{to()});function Et(){if(!pr&&(pr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pr(wu)}var pr,wu,nn=P(()=>{m();w();wu=new Uint8Array(16)});var ro,no=P(()=>{m();w();ro=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function gu(r){return typeof r=="string"&&ro.test(r)}var Se,Tt=P(()=>{m();w();no();Se=gu});function _u(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(M[r[t+0]]+M[r[t+1]]+M[r[t+2]]+M[r[t+3]]+"-"+M[r[t+4]]+M[r[t+5]]+"-"+M[r[t+6]]+M[r[t+7]]+"-"+M[r[t+8]]+M[r[t+9]]+"-"+M[r[t+10]]+M[r[t+11]]+M[r[t+12]]+M[r[t+13]]+M[r[t+14]]+M[r[t+15]]).toLowerCase();if(!Se(e))throw TypeError("Stringified UUID is invalid");return e}var M,dr,ke,At=P(()=>{m();w();Tt();M=[];for(dr=0;dr<256;++dr)M.push((dr+256).toString(16).substr(1));ke=_u});function bu(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var o=r.node||io,a=r.clockseq!==void 0?r.clockseq:on;if(o==null||a==null){var s=r.random||(r.rng||Et)();o==null&&(o=io=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=on=(s[6]<<8|s[7])&16383)}var l=r.msecs!==void 0?r.msecs:Date.now(),f=r.nsecs!==void 0?r.nsecs:sn+1,u=l-an+(f-sn)/1e4;if(u<0&&r.clockseq===void 0&&(a=a+1&16383),(u<0||l>an)&&r.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");an=l,sn=f,on=a,l+=122192928e5;var h=((l&268435455)*1e4+f)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;var p=l/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var c=0;c<6;++c)i[n+c]=o[c];return t||ke(i)}var io,on,an,sn,oo,ao=P(()=>{m();w();nn();At();an=0,sn=0;oo=bu});function xu(r){if(!Se(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var mr,fn=P(()=>{m();w();Tt();mr=xu});function yu(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}function wr(r,t,e){function n(i,o,a,s){if(typeof i=="string"&&(i=yu(i)),typeof o=="string"&&(o=mr(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,a){s=s||0;for(var f=0;f<16;++f)a[s+f]=l[f];return a}return ke(l)}try{n.name=r}catch(i){}return n.DNS=vu,n.URL=Eu,n}var vu,Eu,un=P(()=>{m();w();At();fn();vu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Eu="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Tu(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Au(Cu(Ru(r),r.length*8))}function Au(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var o=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(a)}return t}function so(r){return(r+64>>>9<<4)+14+1}function Cu(r,t){r[t>>5]|=128<<t%32,r[so(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<r.length;a+=16){var s=e,l=n,f=i,u=o;e=Z(e,n,i,o,r[a],7,-680876936),o=Z(o,e,n,i,r[a+1],12,-389564586),i=Z(i,o,e,n,r[a+2],17,606105819),n=Z(n,i,o,e,r[a+3],22,-1044525330),e=Z(e,n,i,o,r[a+4],7,-176418897),o=Z(o,e,n,i,r[a+5],12,1200080426),i=Z(i,o,e,n,r[a+6],17,-1473231341),n=Z(n,i,o,e,r[a+7],22,-45705983),e=Z(e,n,i,o,r[a+8],7,1770035416),o=Z(o,e,n,i,r[a+9],12,-1958414417),i=Z(i,o,e,n,r[a+10],17,-42063),n=Z(n,i,o,e,r[a+11],22,-1990404162),e=Z(e,n,i,o,r[a+12],7,1804603682),o=Z(o,e,n,i,r[a+13],12,-40341101),i=Z(i,o,e,n,r[a+14],17,-1502002290),n=Z(n,i,o,e,r[a+15],22,1236535329),e=Y(e,n,i,o,r[a+1],5,-165796510),o=Y(o,e,n,i,r[a+6],9,-1069501632),i=Y(i,o,e,n,r[a+11],14,643717713),n=Y(n,i,o,e,r[a],20,-373897302),e=Y(e,n,i,o,r[a+5],5,-701558691),o=Y(o,e,n,i,r[a+10],9,38016083),i=Y(i,o,e,n,r[a+15],14,-660478335),n=Y(n,i,o,e,r[a+4],20,-405537848),e=Y(e,n,i,o,r[a+9],5,568446438),o=Y(o,e,n,i,r[a+14],9,-1019803690),i=Y(i,o,e,n,r[a+3],14,-187363961),n=Y(n,i,o,e,r[a+8],20,1163531501),e=Y(e,n,i,o,r[a+13],5,-1444681467),o=Y(o,e,n,i,r[a+2],9,-51403784),i=Y(i,o,e,n,r[a+7],14,1735328473),n=Y(n,i,o,e,r[a+12],20,-1926607734),e=H(e,n,i,o,r[a+5],4,-378558),o=H(o,e,n,i,r[a+8],11,-2022574463),i=H(i,o,e,n,r[a+11],16,1839030562),n=H(n,i,o,e,r[a+14],23,-35309556),e=H(e,n,i,o,r[a+1],4,-1530992060),o=H(o,e,n,i,r[a+4],11,1272893353),i=H(i,o,e,n,r[a+7],16,-155497632),n=H(n,i,o,e,r[a+10],23,-1094730640),e=H(e,n,i,o,r[a+13],4,681279174),o=H(o,e,n,i,r[a],11,-358537222),i=H(i,o,e,n,r[a+3],16,-722521979),n=H(n,i,o,e,r[a+6],23,76029189),e=H(e,n,i,o,r[a+9],4,-640364487),o=H(o,e,n,i,r[a+12],11,-421815835),i=H(i,o,e,n,r[a+15],16,530742520),n=H(n,i,o,e,r[a+2],23,-995338651),e=j(e,n,i,o,r[a],6,-198630844),o=j(o,e,n,i,r[a+7],10,1126891415),i=j(i,o,e,n,r[a+14],15,-1416354905),n=j(n,i,o,e,r[a+5],21,-57434055),e=j(e,n,i,o,r[a+12],6,1700485571),o=j(o,e,n,i,r[a+3],10,-1894986606),i=j(i,o,e,n,r[a+10],15,-1051523),n=j(n,i,o,e,r[a+1],21,-2054922799),e=j(e,n,i,o,r[a+8],6,1873313359),o=j(o,e,n,i,r[a+15],10,-30611744),i=j(i,o,e,n,r[a+6],15,-1560198380),n=j(n,i,o,e,r[a+13],21,1309151649),e=j(e,n,i,o,r[a+4],6,-145523070),o=j(o,e,n,i,r[a+11],10,-1120210379),i=j(i,o,e,n,r[a+2],15,718787259),n=j(n,i,o,e,r[a+9],21,-343485551),e=Ie(e,s),n=Ie(n,l),i=Ie(i,f),o=Ie(o,u)}return[e,n,i,o]}function Ru(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(so(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Ie(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Su(r,t){return r<<t|r>>>32-t}function gr(r,t,e,n,i,o){return Ie(Su(Ie(Ie(t,r),Ie(n,o)),i),e)}function Z(r,t,e,n,i,o,a){return gr(t&e|~t&n,r,t,i,o,a)}function Y(r,t,e,n,i,o,a){return gr(t&n|e&~n,r,t,i,o,a)}function H(r,t,e,n,i,o,a){return gr(t^e^n,r,t,i,o,a)}function j(r,t,e,n,i,o,a){return gr(e^(t|~n),r,t,i,o,a)}var fo,uo=P(()=>{m();w();fo=Tu});var ku,lo,ho=P(()=>{m();w();un();uo();ku=wr("v3",48,fo),lo=ku});function Iu(r,t,e){r=r||{};var n=r.random||(r.rng||Et)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return ke(n)}var co,po=P(()=>{m();w();nn();At();co=Iu});function Nu(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function ln(r,t){return r<<t|r>>>32-t}function $u(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,a=Math.ceil(o/16),s=new Array(a),l=0;l<a;++l){for(var f=new Uint32Array(16),u=0;u<16;++u)f[u]=r[l*64+u*4]<<24|r[l*64+u*4+1]<<16|r[l*64+u*4+2]<<8|r[l*64+u*4+3];s[l]=f}s[a-1][14]=(r.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(r.length-1)*8&4294967295;for(var h=0;h<a;++h){for(var p=new Uint32Array(80),c=0;c<16;++c)p[c]=s[h][c];for(var g=16;g<80;++g)p[g]=ln(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var _=e[0],R=e[1],T=e[2],k=e[3],A=e[4],x=0;x<80;++x){var C=Math.floor(x/20),N=ln(_,5)+Nu(C,R,T,k)+A+t[C]+p[x]>>>0;A=k,k=T,T=ln(R,30)>>>0,R=_,_=N}e[0]=e[0]+_>>>0,e[1]=e[1]+R>>>0,e[2]=e[2]+T>>>0,e[3]=e[3]+k>>>0,e[4]=e[4]+A>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var mo,wo=P(()=>{m();w();mo=$u});var Uu,go,_o=P(()=>{m();w();un();wo();Uu=wr("v5",80,mo),go=Uu});var bo,xo=P(()=>{m();w();bo="00000000-0000-0000-0000-000000000000"});function Fu(r){if(!Se(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var yo,vo=P(()=>{m();w();Tt();yo=Fu});var Eo={};cf(Eo,{NIL:()=>bo,parse:()=>mr,stringify:()=>ke,v1:()=>oo,v3:()=>lo,v4:()=>co,v5:()=>go,validate:()=>Se,version:()=>yo});var To=P(()=>{m();w();ao();ho();po();_o();xo();vo();Tt();At();fn()});var Ao=he(Ct=>{m();w();var _r=(To(),pf(Eo)),hn=(()=>typeof d!="undefined"?r=>d.from(r).toString("base64"):r=>btoa(String.fromCharCode(...r)))(),Bu=(()=>typeof d!="undefined"?r=>d.from(r,"base64"):r=>Uint8Array.from(atob(r),t=>t.charCodeAt(0)))();Ct.encode=function(r){var t=_r.parse(r),e=hn(t),n=e.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n};Ct.decode=function(r){var t=r.replace(/-/g,"+").replace(/_/g,"/")+"==";return _r.stringify(Bu(t))};Ct.v4=function(){var r=_r.v4(null,new Uint8Array(16)),t=hn(r),e=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return e};Ct.nice=function(){var r=_r.v4(null,new Uint8Array(16));r[0]=r[0]&127;var t=hn(r),e=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return e}});var Ro=he((X0,Co)=>{m();w();Co.exports=Ao()});var Jo=he(St=>{"use strict";m();w();Object.defineProperty(St,"__esModule",{value:!0});function _n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Go(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function bn(r,t,e){return t&&Go(r.prototype,t),e&&Go(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function pl(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&gn(r,t)}function ot(r){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(r)}function gn(r,t){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gn(r,t)}function dl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function Rt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ml(r,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rt(r)}function wl(r){var t=dl();return function(){var n=ot(r),i;if(t){var o=ot(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return ml(this,i)}}function gl(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=ot(r),r!==null););return r}function Sr(){return typeof Reflect!="undefined"&&Reflect.get?Sr=Reflect.get.bind():Sr=function(t,e,n){var i=gl(t,e);if(!!i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Sr.apply(this,arguments)}var Ko=function(){function r(){_n(this,r),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return bn(r,[{key:"addEventListener",value:function(e,n,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:n,options:i})}},{key:"removeEventListener",value:function(e,n){if(e in this.listeners){for(var i=this.listeners[e],o=0,a=i.length;o<a;o++)if(i[o].callback===n){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var n=this.listeners[e.type],i=n.slice(),o=0,a=i.length;o<a;o++){var s=i[o];try{s.callback.call(this,e)}catch(l){Promise.resolve().then(function(){throw l})}s.options&&s.options.once&&this.removeEventListener(e.type,s.callback)}return!e.defaultPrevented}}}]),r}(),xn=function(r){pl(e,r);var t=wl(e);function e(){var n;return _n(this,e),n=t.call(this),n.listeners||Ko.call(Rt(n)),Object.defineProperty(Rt(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(Rt(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(Rt(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return bn(e,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),Sr(ot(e.prototype),"dispatchEvent",this).call(this,i)}}]),e}(Ko),Xo=function(){function r(){_n(this,r),Object.defineProperty(this,"signal",{value:new xn,writable:!0,configurable:!0})}return bn(r,[{key:"abort",value:function(e){var n;try{n=new Event("abort")}catch(o){typeof document!="undefined"?document.createEvent?(n=document.createEvent("Event"),n.initEvent("abort",!1,!1)):(n=document.createEventObject(),n.type="abort"):n={type:"abort",bubbles:!1,cancelable:!1}}var i=e;if(i===void 0)if(typeof document=="undefined")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch(o){i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(n)}},{key:"toString",value:function(){return"[object AbortController]"}}]),r}();typeof Symbol!="undefined"&&Symbol.toStringTag&&(Xo.prototype[Symbol.toStringTag]="AbortController",xn.prototype[Symbol.toStringTag]="AbortSignal");function _l(r){return r.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof r.Request=="function"&&!r.Request.prototype.hasOwnProperty("signal")||!r.AbortController}function bl(r){typeof r=="function"&&(r={fetch:r});var t=r,e=t.fetch,n=t.Request,i=n===void 0?e.Request:n,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=a===void 0?!1:a;if(!_l({fetch:e,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:e,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||s)&&(l=function(p,c){var g;c&&c.signal&&(g=c.signal,delete c.signal);var _=new i(p,c);return g&&Object.defineProperty(_,"signal",{writable:!1,enumerable:!1,configurable:!0,value:g}),_},l.prototype=i.prototype);var f=e,u=function(p,c){var g=l&&l.prototype.isPrototypeOf(p)?p.signal:c?c.signal:void 0;if(g){var _;try{_=new DOMException("Aborted","AbortError")}catch(T){_=new Error("Aborted"),_.name="AbortError"}if(g.aborted)return Promise.reject(_);var R=new Promise(function(T,k){g.addEventListener("abort",function(){return k(_)},{once:!0})});return c&&c.signal&&delete c.signal,Promise.race([R,f(p,c)])}return f(p,c)};return{fetch:u,Request:l}}St.AbortController=Xo;St.AbortSignal=xn;St.abortableFetch=bl});var yn=he(at=>{"use strict";m();w();Object.defineProperty(at,"__esModule",{value:!0});at.AbortSignal=at.AbortController=void 0;var Qo=Jo(),kr=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof globalThis!="undefined")return globalThis;throw new Error("unable to locate global object")},xl=typeof kr().AbortController=="undefined"?Qo.AbortController:kr().AbortController;at.AbortController=xl;var yl=typeof kr().AbortController=="undefined"?Qo.AbortSignal:kr().AbortSignal;at.AbortSignal=yl});var ea=he(Tn=>{"use strict";m();w();Object.defineProperty(Tn,"__esModule",{value:!0});var vl=yn(),vn=class{},En=class{constructor(){this.signals=new Set,this.abortController=new vl.AbortController}addSignal(t=new vn){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):typeof t.addEventListener=="function"&&t.addEventListener("abort",()=>{this.handleAborted(t)})}handleAborted(t){this.signals.delete(t),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}};Tn.default=En});var ta=he(Cn=>{"use strict";m();w();Object.defineProperty(Cn,"__esModule",{value:!0});var An=class{constructor(){this.callbacks=new Set}addCallback(t=()=>{}){this.callbacks.add(t),t(this.currentMessage)}callback(t){this.currentMessage=t,this.callbacks.forEach(e=>{e(t)})}};Cn.default=An});var na=he(kt=>{"use strict";m();w();var ra=kt&&kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kt,"__esModule",{value:!0});var El=yn(),Tl=ra(ea()),Al=ra(ta()),st=class{constructor({fill:t,cache:e}){if(typeof t!="function")throw new TypeError("must pass a fill function");if(typeof e!="object")throw new TypeError("must pass a cache object");if(typeof e.get!="function"||typeof e.set!="function"||typeof e.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=e,this.fillCallback=t}static isAbortException(t){return t.name==="AbortError"||t.code==="ERR_ABORTED"||t.message==="AbortError: aborted"||t.message==="Error: aborted"}evict(t,e){this.cache.get(t)===e&&this.cache.delete(t)}fill(t,e,n,i){let o=new Tl.default,a=new Al.default;a.addCallback(i);let s={aborter:o,promise:this.fillCallback(e,o.signal,l=>{a.callback(l)}),settled:!1,statusReporter:a,get aborted(){return this.aborter.signal.aborted}};s.aborter.addSignal(n),s.aborter.signal.addEventListener("abort",()=>{s.settled||this.evict(t,s)}),s.promise.then(()=>{s.settled=!0},()=>{s.settled=!0,this.evict(t,s)}).catch(l=>{throw console.error(l),l}),this.cache.set(t,s)}static checkSinglePromise(t,e){function n(){if(e&&e.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return t.then(i=>(n(),i),i=>{throw n(),i})}has(t){return this.cache.has(t)}get(t,e,n,i){if(!n&&e instanceof El.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");let o=this.cache.get(t);return o?o.aborted&&!o.settled?(this.evict(t,o),this.get(t,e,n,i)):o.settled?o.promise:(o.aborter.addSignal(n),o.statusReporter.addCallback(i),st.checkSinglePromise(o.promise,n)):(this.fill(t,e,n,i),st.checkSinglePromise(this.cache.get(t).promise,n))}delete(t){let e=this.cache.get(t);e&&(e.settled||e.aborter.abort(),this.cache.delete(t))}clear(){let t=this.cache.keys(),e=0;for(let n=t.next();!n.done;n=t.next())this.delete(n.value),e+=1;return e}};kt.default=st});var Rn=he(It=>{"use strict";m();w();var Cl=It&&It.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(It,"__esModule",{value:!0});var Rl=Cl(na());It.default=Rl.default});var kn=he((ud,ia)=>{"use strict";m();w();var Sn=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){let e=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){let e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache)yield t;for(let t of this.oldCache){let[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(let e of this.oldCache.keys())this.cache.has(e)||t++;return this._size+t}};ia.exports=Sn});var ks=he(()=>{m();w()});m();w();m();w();var nf=rt(Ro(),1);m();w();m();w();m();w();var br=BigInt(32);function So(r,t,e){let n=Number(!!e),i=Number(!e);return BigInt(r.getInt32(t,e)*i+r.getInt32(t+4,e)*n)<<br|BigInt(r.getUint32(t,e)*n+r.getUint32(t+4,e)*i)}function ko(r,t,e){let n=r.getUint32(t,e),i=r.getUint32(t+4,e),o=Number(!!e),a=Number(!e);return BigInt(n*a+i*o)<<br|BigInt(n*o+i*a)}function Io(r,t,e,n){let i=Number(e>>br),o=Number(e&BigInt(4294967295));n?(r.setInt32(t+4,i,n),r.setUint32(t,o,n)):(r.setInt32(t,i,n),r.setUint32(t+4,o,n))}function No(r,t,e,n){let i=Number(e>>br),o=Number(e&BigInt(4294967295));n?(r.setUint32(t+4,i,n),r.setUint32(t,o,n)):(r.setUint32(t,i,n),r.setUint32(t+4,o,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(r,t){return So(this,r,t)});"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(r,t){return ko(this,r,t)});"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(r,t,e){Io(this,r,t,e)});"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(r,t,e){No(this,r,t,e)});m();w();m();w();m();w();var de=[],ie=[],Ou=typeof Uint8Array!="undefined"?Uint8Array:Array,pn=!1;function Bo(){pn=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)de[t]=r[t],ie[r.charCodeAt(t)]=t;ie["-".charCodeAt(0)]=62,ie["_".charCodeAt(0)]=63}function Pu(r){pn||Bo();var t,e,n,i,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Ou(s*3/4-o),n=o>0?s-4:s;var l=0;for(t=0,e=0;t<n;t+=4,e+=3)i=ie[r.charCodeAt(t)]<<18|ie[r.charCodeAt(t+1)]<<12|ie[r.charCodeAt(t+2)]<<6|ie[r.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=i&255;return o===2?(i=ie[r.charCodeAt(t)]<<2|ie[r.charCodeAt(t+1)]>>4,a[l++]=i&255):o===1&&(i=ie[r.charCodeAt(t)]<<10|ie[r.charCodeAt(t+1)]<<4|ie[r.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=i&255),a}function Du(r){return de[r>>18&63]+de[r>>12&63]+de[r>>6&63]+de[r&63]}function zu(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(Du(n));return i.join("")}function $o(r){pn||Bo();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,s=0,l=e-n;s<l;s+=a)o.push(zu(r,s,s+a>l?l:s+a));return n===1?(t=r[e-1],i+=de[t>>2],i+=de[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=de[t>>10],i+=de[t>>4&63],i+=de[t<<2&63],i+="="),o.push(i),o.join("")}function vr(r,t,e,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,f=l>>1,u=-7,h=e?i-1:0,p=e?-1:1,c=r[t+h];for(h+=p,o=c&(1<<-u)-1,c>>=-u,u+=s;u>0;o=o*256+r[t+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=a*256+r[t+h],h+=p,u-=8);if(o===0)o=1-f;else{if(o===l)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-f}return(c?-1:1)*a*Math.pow(2,o-n)}function Oo(r,t,e,n,i,o){var a,s,l,f=o*8-i-1,u=(1<<f)-1,h=u>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,g=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a=a+h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;r[e+c]=s&255,c+=g,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;r[e+c]=a&255,c+=g,a/=256,f-=8);r[e+c-g]|=_*128}var Lu={}.toString,Po=Array.isArray||function(r){return Lu.call(r)=="[object Array]"};var Mu=50;b.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;var ed=xr();function xr(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ve(r,t){if(xr()<t)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=b.prototype):(r===null&&(r=new b(t)),r.length=t),r}function b(r,t,e){if(!b.TYPED_ARRAY_SUPPORT&&!(this instanceof b))return new b(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return dn(this,r)}return Do(this,r,t,e)}b.poolSize=8192;b._augment=function(r){return r.__proto__=b.prototype,r};function Do(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Yu(r,t,e,n):typeof t=="string"?Zu(r,t,e):Hu(r,t)}b.from=function(r,t,e){return Do(null,r,t,e)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array);function zo(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Vu(r,t,e,n){return zo(t),t<=0?ve(r,t):e!==void 0?typeof n=="string"?ve(r,t).fill(e,n):ve(r,t).fill(e):ve(r,t)}b.alloc=function(r,t,e){return Vu(null,r,t,e)};function dn(r,t){if(zo(t),r=ve(r,t<0?0:mn(t)|0),!b.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}b.allocUnsafe=function(r){return dn(null,r)};b.allocUnsafeSlow=function(r){return dn(null,r)};function Zu(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!b.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=Lo(t,e)|0;r=ve(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function cn(r,t){var e=t.length<0?0:mn(t.length)|0;r=ve(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Yu(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),b.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=b.prototype):r=cn(r,t),r}function Hu(r,t){if(me(t)){var e=mn(t.length)|0;return r=ve(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||ll(t.length)?ve(r,0):cn(r,t);if(t.type==="Buffer"&&Po(t.data))return cn(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function mn(r){if(r>=xr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xr().toString(16)+" bytes");return r|0}b.isBuffer=hl;function me(r){return!!(r!=null&&r._isBuffer)}b.compare=function(t,e){if(!me(t)||!me(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};b.concat=function(t,e){if(!Po(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return b.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=b.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!me(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function Lo(r,t){if(me(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return yr(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Wo(r).length;default:if(n)return yr(r).length;t=(""+t).toLowerCase(),n=!0}}b.byteLength=Lo;function ju(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return rl(this,t,e);case"utf8":case"utf-8":return Zo(this,t,e);case"ascii":return el(this,t,e);case"latin1":case"binary":return tl(this,t,e);case"base64":return Ju(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nl(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}b.prototype._isBuffer=!0;function Ve(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}b.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ve(this,e,e+1);return this};b.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ve(this,e,e+3),Ve(this,e+1,e+2);return this};b.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ve(this,e,e+7),Ve(this,e+1,e+6),Ve(this,e+2,e+5),Ve(this,e+3,e+4);return this};b.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Zo(this,0,t):ju.apply(this,arguments)};b.prototype.equals=function(t){if(!me(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:b.compare(this,t)===0};b.prototype.inspect=function(){var t="",e=Mu;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"};b.prototype.compare=function(t,e,n,i,o){if(!me(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-e,l=Math.min(a,s),f=this.slice(i,o),u=t.slice(e,n),h=0;h<l;++h)if(f[h]!==u[h]){a=f[h],s=u[h];break}return a<s?-1:s<a?1:0};function Mo(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=b.from(t,n)),me(t))return t.length===0?-1:Uo(r,t,e,n,i);if(typeof t=="number")return t=t&255,b.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Uo(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function Uo(r,t,e,n,i){var o=1,a=r.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(c,g){return o===1?c[g]:c.readUInt16BE(g*o)}var f;if(i){var u=-1;for(f=e;f<a;f++)if(l(r,f)===l(t,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===s)return u*o}else u!==-1&&(f-=f-u),u=-1}else for(e+s>a&&(e=a-s),f=e;f>=0;f--){for(var h=!0,p=0;p<s;p++)if(l(r,f+p)!==l(t,p)){h=!1;break}if(h)return f}return-1}b.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};b.prototype.indexOf=function(t,e,n){return Mo(this,t,e,n,!0)};b.prototype.lastIndexOf=function(t,e,n){return Mo(this,t,e,n,!1)};function Wu(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;r[e+a]=s}return a}function qu(r,t,e,n){return Ar(yr(t,r.length-e),r,e,n)}function Vo(r,t,e,n){return Ar(fl(t),r,e,n)}function Gu(r,t,e,n){return Vo(r,t,e,n)}function Ku(r,t,e,n){return Ar(Wo(t),r,e,n)}function Xu(r,t,e,n){return Ar(ul(t,r.length-e),r,e,n)}b.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Wu(this,t,e,n);case"utf8":case"utf-8":return qu(this,t,e,n);case"ascii":return Vo(this,t,e,n);case"latin1":case"binary":return Gu(this,t,e,n);case"base64":return Ku(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xu(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ju(r,t,e){return t===0&&e===r.length?$o(r):$o(r.slice(t,e))}function Zo(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var l,f,u,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(h=(o&31)<<6|l&63,h>127&&(a=h));break;case 3:l=r[i+1],f=r[i+2],(l&192)===128&&(f&192)===128&&(h=(o&15)<<12|(l&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=r[i+1],f=r[i+2],u=r[i+3],(l&192)===128&&(f&192)===128&&(u&192)===128&&(h=(o&15)<<18|(l&63)<<12|(f&63)<<6|u&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=s}return Qu(n)}var Fo=4096;function Qu(r){var t=r.length;if(t<=Fo)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=Fo));return e}function el(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function tl(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function rl(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=sl(r[o]);return i}function nl(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}b.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(b.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=b.prototype;else{var o=e-t;i=new b(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function z(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};b.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};b.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]};b.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8};b.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]};b.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};b.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};b.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};b.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};b.prototype.readInt8=function(t,e){return e||z(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};b.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};b.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};b.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};b.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};b.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),vr(this,t,!0,23,4)};b.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),vr(this,t,!1,23,4)};b.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),vr(this,t,!0,52,8)};b.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),vr(this,t,!1,52,8)};function G(r,t,e,n,i,o){if(!me(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;G(this,t,e,n,o,0)}var a=1,s=0;for(this[e]=t&255;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n};b.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;G(this,t,e,n,o,0)}var a=n-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n};b.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};function Er(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}b.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Er(this,t,e,!0),e+2};b.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Er(this,t,e,!1),e+2};function Tr(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}b.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):Tr(this,t,e,!0),e+4};b.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):Tr(this,t,e,!1),e+4};b.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);G(this,t,e,n,o-1,-o)}var a=0,s=1,l=0;for(this[e]=t&255;++a<n&&(s*=256);)t<0&&l===0&&this[e+a-1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};b.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);G(this,t,e,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&l===0&&this[e+a+1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};b.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};b.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Er(this,t,e,!0),e+2};b.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Er(this,t,e,!1),e+2};b.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Tr(this,t,e,!0),e+4};b.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):Tr(this,t,e,!1),e+4};function Yo(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Ho(r,t,e,n,i){return i||Yo(r,t,e,4),Oo(r,t,e,n,23,4),e+4}b.prototype.writeFloatLE=function(t,e,n){return Ho(this,t,e,!0,n)};b.prototype.writeFloatBE=function(t,e,n){return Ho(this,t,e,!1,n)};function jo(r,t,e,n,i){return i||Yo(r,t,e,8),Oo(r,t,e,n,52,8),e+8}b.prototype.writeDoubleLE=function(t,e,n){return jo(this,t,e,!0,n)};b.prototype.writeDoubleBE=function(t,e,n){return jo(this,t,e,!1,n)};b.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!b.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};b.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var s=me(t)?t:yr(new b(t,i).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};var il=/[^+\/0-9A-Za-z-_]/g;function ol(r){if(r=al(r).replace(il,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function al(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function sl(r){return r<16?"0"+r.toString(16):r.toString(16)}function yr(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function fl(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function ul(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Wo(r){return Pu(ol(r))}function Ar(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function ll(r){return r!==r}function hl(r){return r!=null&&(!!r._isBuffer||qo(r)||cl(r))}function qo(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function cl(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&qo(r.slice(0,0))}m();w();var wn=class{constructor(t,e){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=t,this.useContextVariables=e}generateVariable(t){let e=[...this.scopes[this.scopes.length-1]];return t&&e.push(t),e.join(".")}generateOption(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return`${this.addImport(t)}.call(${this.generateVariable()}, vars)`}}generateError(t){this.pushCode(`throw new Error(${t});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(t){this.code+=t+`
`}pushPath(t){t&&this.scopes[this.scopes.length-1].push(t)}popPath(t){t&&this.scopes[this.scopes.length-1].pop()}pushScope(t){this.scopes.push([t])}popScope(){this.scopes.pop()}addImport(t){if(!this.importPath)return`(${t})`;let e=this.reverseImports.get(t);return e||(e=this.imports.push(t)-1,this.reverseImports.set(t,e)),`${this.importPath}[${e}]`}addReference(t){this.references.has(t)||this.references.set(t,{resolved:!1,requested:!1})}markResolved(t){let e=this.references.get(t);e&&(e.resolved=!0)}markRequested(t){t.forEach(e=>{let n=this.references.get(e);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([t,e])=>!e.resolved&&!e.requested).map(([t,e])=>t)}},fe=new Map,Ze="___parser_",ue={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},Cr={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},Rr={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},U=class{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new U}primitiveGenerateN(t,e){let n=Cr[t],i=Rr[t];e.pushCode(`${e.generateVariable(this.varName)} = dataView.get${n}(offset, ${i});`),e.pushCode(`offset += ${ue[t]};`)}primitiveN(t,e,n){return this.setNextParser(t,e,n)}useThisEndian(t){return t+this.endian.toLowerCase()}uint8(t,e={}){return this.primitiveN("uint8",t,e)}uint16(t,e={}){return this.primitiveN(this.useThisEndian("uint16"),t,e)}uint16le(t,e={}){return this.primitiveN("uint16le",t,e)}uint16be(t,e={}){return this.primitiveN("uint16be",t,e)}uint32(t,e={}){return this.primitiveN(this.useThisEndian("uint32"),t,e)}uint32le(t,e={}){return this.primitiveN("uint32le",t,e)}uint32be(t,e={}){return this.primitiveN("uint32be",t,e)}int8(t,e={}){return this.primitiveN("int8",t,e)}int16(t,e={}){return this.primitiveN(this.useThisEndian("int16"),t,e)}int16le(t,e={}){return this.primitiveN("int16le",t,e)}int16be(t,e={}){return this.primitiveN("int16be",t,e)}int32(t,e={}){return this.primitiveN(this.useThisEndian("int32"),t,e)}int32le(t,e={}){return this.primitiveN("int32le",t,e)}int32be(t,e={}){return this.primitiveN("int32be",t,e)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(t,e={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),t,e)}int64be(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",t,e)}int64le(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",t,e)}uint64(t,e={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),t,e)}uint64be(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",t,e)}uint64le(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",t,e)}floatle(t,e={}){return this.primitiveN("floatle",t,e)}floatbe(t,e={}){return this.primitiveN("floatbe",t,e)}doublele(t,e={}){return this.primitiveN("doublele",t,e)}doublebe(t,e={}){return this.primitiveN("doublebe",t,e)}bitN(t,e,n){return n.length=t,this.setNextParser("bit",e,n)}bit1(t,e={}){return this.bitN(1,t,e)}bit2(t,e={}){return this.bitN(2,t,e)}bit3(t,e={}){return this.bitN(3,t,e)}bit4(t,e={}){return this.bitN(4,t,e)}bit5(t,e={}){return this.bitN(5,t,e)}bit6(t,e={}){return this.bitN(6,t,e)}bit7(t,e={}){return this.bitN(7,t,e)}bit8(t,e={}){return this.bitN(8,t,e)}bit9(t,e={}){return this.bitN(9,t,e)}bit10(t,e={}){return this.bitN(10,t,e)}bit11(t,e={}){return this.bitN(11,t,e)}bit12(t,e={}){return this.bitN(12,t,e)}bit13(t,e={}){return this.bitN(13,t,e)}bit14(t,e={}){return this.bitN(14,t,e)}bit15(t,e={}){return this.bitN(15,t,e)}bit16(t,e={}){return this.bitN(16,t,e)}bit17(t,e={}){return this.bitN(17,t,e)}bit18(t,e={}){return this.bitN(18,t,e)}bit19(t,e={}){return this.bitN(19,t,e)}bit20(t,e={}){return this.bitN(20,t,e)}bit21(t,e={}){return this.bitN(21,t,e)}bit22(t,e={}){return this.bitN(22,t,e)}bit23(t,e={}){return this.bitN(23,t,e)}bit24(t,e={}){return this.bitN(24,t,e)}bit25(t,e={}){return this.bitN(25,t,e)}bit26(t,e={}){return this.bitN(26,t,e)}bit27(t,e={}){return this.bitN(27,t,e)}bit28(t,e={}){return this.bitN(28,t,e)}bit29(t,e={}){return this.bitN(29,t,e)}bit30(t,e={}){return this.bitN(30,t,e)}bit31(t,e={}){return this.bitN(31,t,e)}bit32(t,e={}){return this.bitN(32,t,e)}namely(t){return fe.set(t,this),this.alias=t,this}skip(t,e={}){return this.seek(t,e)}seek(t,e={}){if(e.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:t})}string(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!(e.length||e.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)}buffer(t,e){if(!e.length&&!e.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",t,e)}wrapped(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e||!e.wrapper||!e.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!e.length&&!e.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",t,e)}array(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!e.type)throw new Error("type is required for array.");if(typeof e.type=="string"&&!fe.has(e.type)&&!(e.type in ue))throw new Error(`Array element type "${e.type}" is unkown.`);return this.setNextParser("array",t,e)}choice(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e)throw new Error("tag and choices are are required for choice.");if(!e.tag)throw new Error("tag is requird for choice.");if(!e.choices)throw new Error("choices is required for choice.");for(let n in e.choices){let i=parseInt(n,10),o=e.choices[i];if(isNaN(i))throw new Error(`Choice key "${n}" is not a number.`);if(typeof o=="string"&&!fe.has(o)&&!(o in ue))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",t,e)}nest(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e||!e.type)throw new Error("type is required for nest.");if(!(e.type instanceof U)&&!fe.has(e.type))throw new Error("type must be a known parser name or a Parser object.");if(!(e.type instanceof U)&&!t)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",t,e)}pointer(t,e){if(!e.offset)throw new Error("offset is required for pointer.");if(!e.type)throw new Error("type is required for pointer.");if(typeof e.type=="string"&&!(e.type in ue)&&!fe.has(e.type))throw new Error(`Pointer type "${e.type}" is unkown.`);return this.setNextParser("pointer",t,e)}saveOffset(t,e={}){return this.setNextParser("saveOffset",t,e)}endianness(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(t){return this.endianness(t)}useContextVars(t=!0){return this.useContextVariables=t,this}create(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this}getContext(t){let e=new wn(t,this.useContextVariables);return e.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(e),e.pushCode(`return ${Ze+this.alias}(0).result;`)):this.addRawCode(e),e}getCode(){let t="imports";return this.getContext(t).code}addRawCode(t){t.pushCode("var offset = 0;"),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("vars.$parent = null;"),t.pushCode("vars.$root = vars;"),this.generate(t),this.resolveReferences(t),t.pushCode("delete vars.$parent;"),t.pushCode("delete vars.$root;"),t.pushCode("return vars;")}addAliasedCode(t){return t.pushCode(`function ${Ze+this.alias}(offset, context) {`),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),t.pushCode("vars = Object.assign(vars, ctx);"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t}resolveReferences(t){let e=t.getUnresolvedReferences();t.markRequested(e),e.forEach(n=>{var i;(i=fe.get(n))===null||i===void 0||i.addAliasedCode(t)})}compile(){let t="imports",e=this.getContext(t);this.compiled=new Function(t,"TextDecoder",`return function (buffer, constructorFn) { ${e.code} };`)(e.imports,TextDecoder)}sizeOf(){let t=NaN;if(Object.keys(ue).indexOf(this.type)>=0)t=ue[this.type];else if(this.type==="string"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let e=NaN;typeof this.options.type=="string"?e=ue[this.options.type]:this.options.type instanceof U&&(e=this.options.type.sizeOf()),t=this.options.length*e}else this.type==="seek"?t=this.options.length:this.type==="nest"?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t}parse(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn)}setNextParser(t,e,n){let i=new U;return i.type=t,i.varName=e,i.options=n,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(t){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,t);break;case"bit":this.generateBit(t);break;case"string":this.generateString(t);break;case"buffer":this.generateBuffer(t);break;case"seek":this.generateSeek(t);break;case"nest":this.generateNest(t);break;case"array":this.generateArray(t);break;case"choice":this.generateChoice(t);break;case"pointer":this.generatePointer(t);break;case"saveOffset":this.generateSaveOffset(t);break;case"wrapper":this.generateWrapper(t);break}this.type!=="bit"&&this.generateAssert(t)}let e=t.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)}generateAssert(t){if(!this.options.assert)return;let e=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let n=t.addImport(this.options.assert);t.pushCode(`if (!${n}.call(vars, ${e})) {`)}break;case"number":t.pushCode(`if (${this.options.assert} !== ${e}) {`);break;case"string":t.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${e}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}t.generateError(`"Assertion error: ${e} is " + ${JSON.stringify(this.options.assert.toString())}`),t.pushCode("}")}generateNext(t){return this.next&&(t=this.next.generate(t)),t}generateBit(t){let e=JSON.parse(JSON.stringify(this));if(e.options=this.options,e.generateAssert=this.generateAssert.bind(this),e.generateFormatter=this.generateFormatter.bind(this),e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let n=t.generateTmpVariable();t.pushCode(`var ${n} = 0;`);let i=(u=0)=>{let h=0;for(let p=u;p<t.bitFields.length;p++){let c=t.bitFields[p].options.length;if(h+c>32)break;h+=c}return h},o=u=>(u<=8?(t.pushCode(`${n} = dataView.getUint8(offset);`),u=8):u<=16?(t.pushCode(`${n} = dataView.getUint16(offset);`),u=16):u<=24?(t.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),u=24):(t.pushCode(`${n} = dataView.getUint32(offset);`),u=32),t.pushCode(`offset += ${u/8};`),u),a=0,s=this.endian==="be",l=0,f=0;t.bitFields.forEach((u,h)=>{let p=u.options.length;if(p>f){if(f){let _=-1>>>32-f;t.pushCode(`${u.varName} = (${n} & 0x${_.toString(16)}) << ${p-f};`),p-=f}a=0,f=l=o(i(h)-f)}let c=s?l-a-p:a,g=-1>>>32-p;t.pushCode(`${u.varName} ${p<u.options.length?"|=":"="} ${n} >> ${c} & 0x${g.toString(16)};`),u.options.length===32&&t.pushCode(`${u.varName} >>>= 0`),u.options.assert&&u.generateAssert(t),u.options.formatter&&u.generateFormatter(t,u.varName,u.options.formatter),a+=p,f-=p}),t.bitFields=[]}}generateSeek(t){let e=t.generateOption(this.options.length);t.pushCode(`offset += ${e};`)}generateString(t){let e=t.generateVariable(this.varName),n=t.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",a='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let s=this.options.length;t.pushCode(`var ${n} = offset;`),t.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${s});`);let l=`offset - ${n} < ${s} ? offset - 1 : offset`;t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, ${l}), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, ${l}));`)}else if(this.options.length){let s=t.generateOption(this.options.length);t.pushCode(o?`${e} = Array.from(buffer.subarray(offset, offset + ${s}), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${s}));`),t.pushCode(`offset += ${s};`)}else this.options.zeroTerminated?(t.pushCode(`var ${n} = offset;`),t.pushCode("while(dataView.getUint8(offset++) !== 0);"),t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, offset - 1), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(t.pushCode(`var ${n} = offset;`),t.pushCode("while(buffer.length > offset++);"),t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, offset), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&t.pushCode(`${e} = ${e}.replace(/\\x00+$/g, '')`)}generateBuffer(t){let e=t.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let n=this.options.readUntil,i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode(`var ${i} = offset;`),t.pushCode(`var ${o} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${o} = dataView.getUint8(offset);`);let a=t.addImport(n);t.pushCode(`if (${a}.call(${t.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${e} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${e} = buffer.subarray(offset);`);else{let n=t.generateOption(this.options.length);t.pushCode(`${e} = buffer.subarray(offset, offset + ${n});`),t.pushCode(`offset += ${n};`)}this.options.clone&&t.pushCode(`${e} = buffer.constructor.from(${e});`)}generateArray(t){let e=t.generateOption(this.options.length),n=t.generateOption(this.options.lengthInBytes),i=this.options.type,o=t.generateTmpVariable(),a=t.generateVariable(this.varName),s=t.generateTmpVariable(),l=this.options.key,f=typeof l=="string";if(f?t.pushCode(`${a} = {};`):t.pushCode(`${a} = [];`),typeof this.options.readUntil=="function"?t.pushCode("do {"):this.options.readUntil==="eof"?t.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):n!==void 0?t.pushCode(`for (var ${o} = offset + ${n}; offset < ${o}; ) {`):t.pushCode(`for (var ${o} = ${e}; ${o} > 0; ${o}--) {`),typeof i=="string")if(fe.get(i)){let u=t.generateTmpVariable();if(t.pushCode(`var ${u} = ${Ze+i}(offset, {`),t.useContextVariables){let h=t.generateVariable();t.pushCode(`$parent: ${h},`),t.pushCode(`$root: ${h}.$root,`),!this.options.readUntil&&n===void 0&&t.pushCode(`$index: ${e} - ${o},`)}t.pushCode("});"),t.pushCode(`var ${s} = ${u}.result; offset = ${u}.offset;`),i!==this.alias&&t.addReference(i)}else{let u=Cr[i],h=Rr[i];t.pushCode(`var ${s} = dataView.get${u}(offset, ${h});`),t.pushCode(`offset += ${ue[i]};`)}else if(i instanceof U){t.pushCode(`var ${s} = {};`);let u=t.generateVariable();t.pushScope(s),t.useContextVariables&&(t.pushCode(`${s}.$parent = ${u};`),t.pushCode(`${s}.$root = ${u}.$root;`),!this.options.readUntil&&n===void 0&&t.pushCode(`${s}.$index = ${e} - ${o};`)),i.generate(t),t.useContextVariables&&(t.pushCode(`delete ${s}.$parent;`),t.pushCode(`delete ${s}.$root;`),t.pushCode(`delete ${s}.$index;`)),t.popScope()}if(f?t.pushCode(`${a}[${s}.${l}] = ${s};`):t.pushCode(`${a}.push(${s});`),t.pushCode("}"),typeof this.options.readUntil=="function"){let u=this.options.readUntil,h=t.addImport(u);t.pushCode(`while (!${h}.call(${t.generateVariable()}, ${s}, buffer.subarray(offset)));`)}}generateChoiceCase(t,e,n){if(typeof n=="string"){let i=t.generateVariable(this.varName);if(fe.has(n)){let o=t.generateTmpVariable();t.pushCode(`var ${o} = ${Ze+n}(offset, {`),t.useContextVariables&&(t.pushCode(`$parent: ${i}.$parent,`),t.pushCode(`$root: ${i}.$root,`)),t.pushCode("});"),t.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),n!==this.alias&&t.addReference(n)}else{let o=Cr[n],a=Rr[n];t.pushCode(`${i} = dataView.get${o}(offset, ${a});`),t.pushCode(`offset += ${ue[n]}`)}}else n instanceof U&&(t.pushPath(e),n.generate(t),t.popPath(e))}generateChoice(t){let e=t.generateOption(this.options.tag),n=t.generateVariable(this.varName);if(this.varName&&(t.pushCode(`${n} = {};`),t.useContextVariables)){let i=t.generateVariable();t.pushCode(`${n}.$parent = ${i};`),t.pushCode(`${n}.$root = ${i}.$root;`)}t.pushCode(`switch(${e}) {`);for(let i in this.options.choices){let o=parseInt(i,10),a=this.options.choices[o];t.pushCode(`case ${o}:`),this.generateChoiceCase(t,this.varName,a),t.pushCode("break;")}t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError(`"Met undefined tag value " + ${e} + " at choice"`),t.pushCode("}"),this.varName&&t.useContextVariables&&(t.pushCode(`delete ${n}.$parent;`),t.pushCode(`delete ${n}.$root;`))}generateNest(t){let e=t.generateVariable(this.varName);if(this.options.type instanceof U){if(this.varName&&(t.pushCode(`${e} = {};`),t.useContextVariables)){let n=t.generateVariable();t.pushCode(`${e}.$parent = ${n};`),t.pushCode(`${e}.$root = ${n}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&t.useContextVariables&&t.useContextVariables&&(t.pushCode(`delete ${e}.$parent;`),t.pushCode(`delete ${e}.$root;`))}else if(fe.has(this.options.type)){let n=t.generateTmpVariable();if(t.pushCode(`var ${n} = ${Ze+this.options.type}(offset, {`),t.useContextVariables){let i=t.generateVariable();t.pushCode(`$parent: ${i},`),t.pushCode(`$root: ${i}.$root,`)}t.pushCode("});"),t.pushCode(`${e} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}}generateWrapper(t){let e=t.generateVariable(this.varName),n=t.generateTmpVariable();if(typeof this.options.readUntil=="function"){let l=this.options.readUntil,f=t.generateTmpVariable(),u=t.generateTmpVariable();t.pushCode(`var ${f} = offset;`),t.pushCode(`var ${u} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${u} = dataView.getUint8(offset);`);let h=t.addImport(l);t.pushCode(`if (${h}.call(${t.generateVariable()}, ${u}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${n} = buffer.subarray(${f}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${n} = buffer.subarray(offset);`);else{let l=t.generateOption(this.options.length);t.pushCode(`${n} = buffer.subarray(offset, offset + ${l});`),t.pushCode(`offset += ${l};`)}this.options.clone&&t.pushCode(`${n} = buffer.constructor.from(${n});`);let i=t.generateTmpVariable(),o=t.generateTmpVariable(),a=t.generateTmpVariable(),s=t.addImport(this.options.wrapper);if(t.pushCode(`${n} = ${s}.call(this, ${n}).subarray(0);`),t.pushCode(`var ${i} = buffer;`),t.pushCode(`var ${o} = offset;`),t.pushCode(`var ${a} = dataView;`),t.pushCode(`buffer = ${n};`),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof U)this.varName&&t.pushCode(`${e} = {};`),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(fe.has(this.options.type)){let l=t.generateTmpVariable();t.pushCode(`var ${l} = ${Ze+this.options.type}(0);`),t.pushCode(`${e} = ${l}.result;`),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode(`buffer = ${i};`),t.pushCode(`dataView = ${a};`),t.pushCode(`offset = ${o};`)}generateFormatter(t,e,n){if(typeof n=="function"){let i=t.addImport(n);t.pushCode(`${e} = ${i}.call(${t.generateVariable()}, ${e});`)}}generatePointer(t){let e=this.options.type,n=t.generateOption(this.options.offset),i=t.generateTmpVariable(),o=t.generateVariable(this.varName);if(t.pushCode(`var ${i} = offset;`),t.pushCode(`offset = ${n};`),this.options.type instanceof U){if(t.pushCode(`${o} = {};`),t.useContextVariables){let a=t.generateVariable();t.pushCode(`${o}.$parent = ${a};`),t.pushCode(`${o}.$root = ${a}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.useContextVariables&&(t.pushCode(`delete ${o}.$parent;`),t.pushCode(`delete ${o}.$root;`))}else if(fe.has(this.options.type)){let a=t.generateTmpVariable();if(t.pushCode(`var ${a} = ${Ze+this.options.type}(offset, {`),t.useContextVariables){let s=t.generateVariable();t.pushCode(`$parent: ${s},`),t.pushCode(`$root: ${s}.$root,`)}t.pushCode("});"),t.pushCode(`${o} = ${a}.result; offset = ${a}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(ue).indexOf(this.options.type)>=0){let a=Cr[e],s=Rr[e];t.pushCode(`${o} = dataView.get${a}(offset, ${s});`),t.pushCode(`offset += ${ue[e]};`)}t.pushCode(`offset = ${i};`)}generateSaveOffset(t){let e=t.generateVariable(this.varName);t.pushCode(`${e} = offset`)}};var Rs=rt(Rn()),Ss=rt(kn());m();w();var oe=class{constructor(t,e){this.ranges=arguments.length===2?[{min:t,max:e}]:0 in t?Object.assign({},t):[t]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(t){for(let e=0;e<this.ranges.length;e+=1){let n=this.ranges[e];if(n.min<=t&&n.max>=t)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(t=>new oe(t.min,t.max))}toString(){return this.ranges.map(t=>`[${t.min}-${t.max}]`).join(",")}union(t){let e=this.getRanges().concat(t.getRanges()).sort(this.rangeOrder),n=[],i=e[0];for(let o=1;o<e.length;o+=1){let a=e[o];a.min()>i.max()+1?(n.push(i),i=a):a.max()>i.max()&&(i=new oe(i.min(),a.max()))}return n.push(i),n.length===1?n[0]:new oe(n)}intersection(t){let e=this,n=t,i=this.ranges(),o=n.ranges(),a=i.length,s=o.length,l=0,f=0,u=[];for(;l<a&&f<s;){e=i[l],n=o[f];let h=Math.max(e.min(),n.min()),p=Math.min(e.max(),n.max());p>=h&&u.push(new oe(h,p)),e.max()>n.max()?f+=1:l+=1}if(u.length===0)throw new Error("found range of length 0");return u.length===1?u[0]:new oe(u)}coverage(){let t=0,e=this.ranges();for(let n=0;n<e.length;n+=1){let i=e[n];t+=i.max()-i.min()+1}return t}rangeOrder(t,e){let n=t,i=e;return arguments.length<2&&(i=n,n=this),n.min()<i.min()?-1:n.min()>i.min()?1:n.max()<i.max()?-1:i.max()>n.max()?1:0}};m();w();m();w();function pt(r){let t=r.length;for(;--t>=0;)r[t]=0}var Sl=0,Za=1,kl=2,Il=3,Nl=258,Qn=29,Ht=256,Pt=Ht+1+Qn,lt=30,ei=19,Ya=2*Pt+1,Ye=15,In=16,$l=7,ti=256,Ha=16,ja=17,Wa=18,Yn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Br=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ul=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qa=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fl=512,Te=new Array((Pt+2)*2);pt(Te);var Ft=new Array(lt*2);pt(Ft);var Dt=new Array(Fl);pt(Dt);var zt=new Array(Nl-Il+1);pt(zt);var ri=new Array(Qn);pt(ri);var Or=new Array(lt);pt(Or);function Nn(r,t,e,n,i){this.static_tree=r,this.extra_bits=t,this.extra_base=e,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}var Ga,Ka,Xa;function $n(r,t){this.dyn_tree=r,this.max_code=0,this.stat_desc=t}var Ja=r=>r<256?Dt[r]:Dt[256+(r>>>7)],Lt=(r,t)=>{r.pending_buf[r.pending++]=t&255,r.pending_buf[r.pending++]=t>>>8&255},K=(r,t,e)=>{r.bi_valid>In-e?(r.bi_buf|=t<<r.bi_valid&65535,Lt(r,r.bi_buf),r.bi_buf=t>>In-r.bi_valid,r.bi_valid+=e-In):(r.bi_buf|=t<<r.bi_valid&65535,r.bi_valid+=e)},ge=(r,t,e)=>{K(r,e[t*2],e[t*2+1])},Qa=(r,t)=>{let e=0;do e|=r&1,r>>>=1,e<<=1;while(--t>0);return e>>>1},Bl=r=>{r.bi_valid===16?(Lt(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},Ol=(r,t)=>{let e=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length,f,u,h,p,c,g,_=0;for(p=0;p<=Ye;p++)r.bl_count[p]=0;for(e[r.heap[r.heap_max]*2+1]=0,f=r.heap_max+1;f<Ya;f++)u=r.heap[f],p=e[e[u*2+1]*2+1]+1,p>l&&(p=l,_++),e[u*2+1]=p,!(u>n)&&(r.bl_count[p]++,c=0,u>=s&&(c=a[u-s]),g=e[u*2],r.opt_len+=g*(p+c),o&&(r.static_len+=g*(i[u*2+1]+c)));if(_!==0){do{for(p=l-1;r.bl_count[p]===0;)p--;r.bl_count[p]--,r.bl_count[p+1]+=2,r.bl_count[l]--,_-=2}while(_>0);for(p=l;p!==0;p--)for(u=r.bl_count[p];u!==0;)h=r.heap[--f],!(h>n)&&(e[h*2+1]!==p&&(r.opt_len+=(p-e[h*2+1])*e[h*2],e[h*2+1]=p),u--)}},es=(r,t,e)=>{let n=new Array(Ye+1),i=0,o,a;for(o=1;o<=Ye;o++)i=i+e[o-1]<<1,n[o]=i;for(a=0;a<=t;a++){let s=r[a*2+1];s!==0&&(r[a*2]=Qa(n[s]++,s))}},Pl=()=>{let r,t,e,n,i,o=new Array(Ye+1);for(e=0,n=0;n<Qn-1;n++)for(ri[n]=e,r=0;r<1<<Yn[n];r++)zt[e++]=n;for(zt[e-1]=n,i=0,n=0;n<16;n++)for(Or[n]=i,r=0;r<1<<Br[n];r++)Dt[i++]=n;for(i>>=7;n<lt;n++)for(Or[n]=i<<7,r=0;r<1<<Br[n]-7;r++)Dt[256+i++]=n;for(t=0;t<=Ye;t++)o[t]=0;for(r=0;r<=143;)Te[r*2+1]=8,r++,o[8]++;for(;r<=255;)Te[r*2+1]=9,r++,o[9]++;for(;r<=279;)Te[r*2+1]=7,r++,o[7]++;for(;r<=287;)Te[r*2+1]=8,r++,o[8]++;for(es(Te,Pt+1,o),r=0;r<lt;r++)Ft[r*2+1]=5,Ft[r*2]=Qa(r,5);Ga=new Nn(Te,Yn,Ht+1,Pt,Ye),Ka=new Nn(Ft,Br,0,lt,Ye),Xa=new Nn(new Array(0),Ul,0,ei,$l)},ts=r=>{let t;for(t=0;t<Pt;t++)r.dyn_ltree[t*2]=0;for(t=0;t<lt;t++)r.dyn_dtree[t*2]=0;for(t=0;t<ei;t++)r.bl_tree[t*2]=0;r.dyn_ltree[ti*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},rs=r=>{r.bi_valid>8?Lt(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},oa=(r,t,e,n)=>{let i=t*2,o=e*2;return r[i]<r[o]||r[i]===r[o]&&n[t]<=n[e]},Un=(r,t,e)=>{let n=r.heap[e],i=e<<1;for(;i<=r.heap_len&&(i<r.heap_len&&oa(t,r.heap[i+1],r.heap[i],r.depth)&&i++,!oa(t,n,r.heap[i],r.depth));)r.heap[e]=r.heap[i],e=i,i<<=1;r.heap[e]=n},aa=(r,t,e)=>{let n,i,o=0,a,s;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+o++]&255,n+=(r.pending_buf[r.sym_buf+o++]&255)<<8,i=r.pending_buf[r.sym_buf+o++],n===0?ge(r,i,t):(a=zt[i],ge(r,a+Ht+1,t),s=Yn[a],s!==0&&(i-=ri[a],K(r,i,s)),n--,a=Ja(n),ge(r,a,e),s=Br[a],s!==0&&(n-=Or[a],K(r,n,s)));while(o<r.sym_next);ge(r,ti,t)},Hn=(r,t)=>{let e=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,l=-1,f;for(r.heap_len=0,r.heap_max=Ya,a=0;a<o;a++)e[a*2]!==0?(r.heap[++r.heap_len]=l=a,r.depth[a]=0):e[a*2+1]=0;for(;r.heap_len<2;)f=r.heap[++r.heap_len]=l<2?++l:0,e[f*2]=1,r.depth[f]=0,r.opt_len--,i&&(r.static_len-=n[f*2+1]);for(t.max_code=l,a=r.heap_len>>1;a>=1;a--)Un(r,e,a);f=o;do a=r.heap[1],r.heap[1]=r.heap[r.heap_len--],Un(r,e,1),s=r.heap[1],r.heap[--r.heap_max]=a,r.heap[--r.heap_max]=s,e[f*2]=e[a*2]+e[s*2],r.depth[f]=(r.depth[a]>=r.depth[s]?r.depth[a]:r.depth[s])+1,e[a*2+1]=e[s*2+1]=f,r.heap[1]=f++,Un(r,e,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],Ol(r,t),es(e,l,r.bl_count)},sa=(r,t,e)=>{let n,i=-1,o,a=t[0*2+1],s=0,l=7,f=4;for(a===0&&(l=138,f=3),t[(e+1)*2+1]=65535,n=0;n<=e;n++)o=a,a=t[(n+1)*2+1],!(++s<l&&o===a)&&(s<f?r.bl_tree[o*2]+=s:o!==0?(o!==i&&r.bl_tree[o*2]++,r.bl_tree[Ha*2]++):s<=10?r.bl_tree[ja*2]++:r.bl_tree[Wa*2]++,s=0,i=o,a===0?(l=138,f=3):o===a?(l=6,f=3):(l=7,f=4))},fa=(r,t,e)=>{let n,i=-1,o,a=t[0*2+1],s=0,l=7,f=4;for(a===0&&(l=138,f=3),n=0;n<=e;n++)if(o=a,a=t[(n+1)*2+1],!(++s<l&&o===a)){if(s<f)do ge(r,o,r.bl_tree);while(--s!==0);else o!==0?(o!==i&&(ge(r,o,r.bl_tree),s--),ge(r,Ha,r.bl_tree),K(r,s-3,2)):s<=10?(ge(r,ja,r.bl_tree),K(r,s-3,3)):(ge(r,Wa,r.bl_tree),K(r,s-11,7));s=0,i=o,a===0?(l=138,f=3):o===a?(l=6,f=3):(l=7,f=4)}},Dl=r=>{let t;for(sa(r,r.dyn_ltree,r.l_desc.max_code),sa(r,r.dyn_dtree,r.d_desc.max_code),Hn(r,r.bl_desc),t=ei-1;t>=3&&r.bl_tree[qa[t]*2+1]===0;t--);return r.opt_len+=3*(t+1)+5+5+4,t},zl=(r,t,e,n)=>{let i;for(K(r,t-257,5),K(r,e-1,5),K(r,n-4,4),i=0;i<n;i++)K(r,r.bl_tree[qa[i]*2+1],3);fa(r,r.dyn_ltree,t-1),fa(r,r.dyn_dtree,e-1)},Ll=r=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&r.dyn_ltree[e*2]!==0)return 0;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return 1;for(e=32;e<Ht;e++)if(r.dyn_ltree[e*2]!==0)return 1;return 0},ua=!1,Ml=r=>{ua||(Pl(),ua=!0),r.l_desc=new $n(r.dyn_ltree,Ga),r.d_desc=new $n(r.dyn_dtree,Ka),r.bl_desc=new $n(r.bl_tree,Xa),r.bi_buf=0,r.bi_valid=0,ts(r)},ns=(r,t,e,n)=>{K(r,(Sl<<1)+(n?1:0),3),rs(r),Lt(r,e),Lt(r,~e),e&&r.pending_buf.set(r.window.subarray(t,t+e),r.pending),r.pending+=e},Vl=r=>{K(r,Za<<1,3),ge(r,ti,Te),Bl(r)},Zl=(r,t,e,n)=>{let i,o,a=0;r.level>0?(r.strm.data_type===2&&(r.strm.data_type=Ll(r)),Hn(r,r.l_desc),Hn(r,r.d_desc),a=Dl(r),i=r.opt_len+3+7>>>3,o=r.static_len+3+7>>>3,o<=i&&(i=o)):i=o=e+5,e+4<=i&&t!==-1?ns(r,t,e,n):r.strategy===4||o===i?(K(r,(Za<<1)+(n?1:0),3),aa(r,Te,Ft)):(K(r,(kl<<1)+(n?1:0),3),zl(r,r.l_desc.max_code+1,r.d_desc.max_code+1,a+1),aa(r,r.dyn_ltree,r.dyn_dtree)),ts(r),n&&rs(r)},Yl=(r,t,e)=>(r.pending_buf[r.sym_buf+r.sym_next++]=t,r.pending_buf[r.sym_buf+r.sym_next++]=t>>8,r.pending_buf[r.sym_buf+r.sym_next++]=e,t===0?r.dyn_ltree[e*2]++:(r.matches++,t--,r.dyn_ltree[(zt[e]+Ht+1)*2]++,r.dyn_dtree[Ja(t)*2]++),r.sym_next===r.sym_end),Hl=Ml,jl=ns,Wl=Zl,ql=Yl,Gl=Vl,Kl={_tr_init:Hl,_tr_stored_block:jl,_tr_flush_block:Wl,_tr_tally:ql,_tr_align:Gl},Xl=(r,t,e,n)=>{let i=r&65535|0,o=r>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},Mt=Xl,Jl=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},Ql=new Uint32Array(Jl()),eh=(r,t,e,n)=>{let i=Ql,o=n+e;r^=-1;for(let a=n;a<o;a++)r=r>>>8^i[(r^t[a])&255];return r^-1},L=eh,We={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:th,_tr_stored_block:jn,_tr_flush_block:rh,_tr_tally:Ue,_tr_align:nh}=Kl,{Z_NO_FLUSH:Fe,Z_PARTIAL_FLUSH:ih,Z_FULL_FLUSH:oh,Z_FINISH:ae,Z_BLOCK:la,Z_OK:V,Z_STREAM_END:ha,Z_STREAM_ERROR:_e,Z_DATA_ERROR:ah,Z_BUF_ERROR:Fn,Z_DEFAULT_COMPRESSION:sh,Z_FILTERED:fh,Z_HUFFMAN_ONLY:Ir,Z_RLE:uh,Z_FIXED:lh,Z_DEFAULT_STRATEGY:hh,Z_UNKNOWN:ch,Z_DEFLATED:zr}=dt,ph=9,dh=15,mh=8,wh=29,gh=256,Wn=gh+1+wh,_h=30,bh=19,xh=2*Wn+1,yh=15,F=3,$e=258,be=$e+F+1,vh=32,ht=42,ni=57,qn=69,Gn=73,Kn=91,Xn=103,He=113,$t=666,W=1,mt=2,qe=3,wt=4,Eh=3,je=(r,t)=>(r.msg=We[t],t),ca=r=>r*2-(r>4?9:0),Ne=r=>{let t=r.length;for(;--t>=0;)r[t]=0},Th=r=>{let t,e,n,i=r.w_size;t=r.hash_size,n=t;do e=r.head[--n],r.head[n]=e>=i?e-i:0;while(--t);t=i,n=t;do e=r.prev[--n],r.prev[n]=e>=i?e-i:0;while(--t)},Ah=(r,t,e)=>(t<<r.hash_shift^e)&r.hash_mask,Be=Ah,ee=r=>{let t=r.state,e=t.pending;e>r.avail_out&&(e=r.avail_out),e!==0&&(r.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),r.next_out),r.next_out+=e,t.pending_out+=e,r.total_out+=e,r.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},te=(r,t)=>{rh(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,t),r.block_start=r.strstart,ee(r.strm)},B=(r,t)=>{r.pending_buf[r.pending++]=t},Nt=(r,t)=>{r.pending_buf[r.pending++]=t>>>8&255,r.pending_buf[r.pending++]=t&255},Jn=(r,t,e,n)=>{let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,t.set(r.input.subarray(r.next_in,r.next_in+i),e),r.state.wrap===1?r.adler=Mt(r.adler,t,i,e):r.state.wrap===2&&(r.adler=L(r.adler,t,i,e)),r.next_in+=i,r.total_in+=i,i)},is=(r,t)=>{let e=r.max_chain_length,n=r.strstart,i,o,a=r.prev_length,s=r.nice_match,l=r.strstart>r.w_size-be?r.strstart-(r.w_size-be):0,f=r.window,u=r.w_mask,h=r.prev,p=r.strstart+$e,c=f[n+a-1],g=f[n+a];r.prev_length>=r.good_match&&(e>>=2),s>r.lookahead&&(s=r.lookahead);do if(i=t,!(f[i+a]!==g||f[i+a-1]!==c||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<p);if(o=$e-(p-n),n=p-$e,o>a){if(r.match_start=t,a=o,o>=s)break;c=f[n+a-1],g=f[n+a]}}while((t=h[t&u])>l&&--e!==0);return a<=r.lookahead?a:r.lookahead},ct=r=>{let t=r.w_size,e,n,i;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=t+(t-be)&&(r.window.set(r.window.subarray(t,t+t-n),0),r.match_start-=t,r.strstart-=t,r.block_start-=t,r.insert>r.strstart&&(r.insert=r.strstart),Th(r),n+=t),r.strm.avail_in===0)break;if(e=Jn(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=e,r.lookahead+r.insert>=F)for(i=r.strstart-r.insert,r.ins_h=r.window[i],r.ins_h=Be(r,r.ins_h,r.window[i+1]);r.insert&&(r.ins_h=Be(r,r.ins_h,r.window[i+F-1]),r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,r.insert--,!(r.lookahead+r.insert<F)););}while(r.lookahead<be&&r.strm.avail_in!==0)},os=(r,t)=>{let e=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,i,o,a=0,s=r.strm.avail_in;do{if(n=65535,o=r.bi_valid+42>>3,r.strm.avail_out<o||(o=r.strm.avail_out-o,i=r.strstart-r.block_start,n>i+r.strm.avail_in&&(n=i+r.strm.avail_in),n>o&&(n=o),n<e&&(n===0&&t!==ae||t===Fe||n!==i+r.strm.avail_in)))break;a=t===ae&&n===i+r.strm.avail_in?1:0,jn(r,0,0,a),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,ee(r.strm),i&&(i>n&&(i=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+i),r.strm.next_out),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i,r.block_start+=i,n-=i),n&&(Jn(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(a===0);return s-=r.strm.avail_in,s&&(s>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=s&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-s,r.strm.next_in),r.strstart),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),a?wt:t!==Fe&&t!==ae&&r.strm.avail_in===0&&r.strstart===r.block_start?mt:(o=r.window_size-r.strstart,r.strm.avail_in>o&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,o+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),o>r.strm.avail_in&&(o=r.strm.avail_in),o&&(Jn(r.strm,r.window,r.strstart,o),r.strstart+=o,r.insert+=o>r.w_size-r.insert?r.w_size-r.insert:o),r.high_water<r.strstart&&(r.high_water=r.strstart),o=r.bi_valid+42>>3,o=r.pending_buf_size-o>65535?65535:r.pending_buf_size-o,e=o>r.w_size?r.w_size:o,i=r.strstart-r.block_start,(i>=e||(i||t===ae)&&t!==Fe&&r.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,a=t===ae&&r.strm.avail_in===0&&n===i?1:0,jn(r,r.block_start,n,a),r.block_start+=n,ee(r.strm)),a?qe:W)},Bn=(r,t)=>{let e,n;for(;;){if(r.lookahead<be){if(ct(r),r.lookahead<be&&t===Fe)return W;if(r.lookahead===0)break}if(e=0,r.lookahead>=F&&(r.ins_h=Be(r,r.ins_h,r.window[r.strstart+F-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),e!==0&&r.strstart-e<=r.w_size-be&&(r.match_length=is(r,e)),r.match_length>=F)if(n=Ue(r,r.strstart-r.match_start,r.match_length-F),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=F){r.match_length--;do r.strstart++,r.ins_h=Be(r,r.ins_h,r.window[r.strstart+F-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=Be(r,r.ins_h,r.window[r.strstart+1]);else n=Ue(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(te(r,!1),r.strm.avail_out===0))return W}return r.insert=r.strstart<F-1?r.strstart:F-1,t===ae?(te(r,!0),r.strm.avail_out===0?qe:wt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:mt},ft=(r,t)=>{let e,n,i;for(;;){if(r.lookahead<be){if(ct(r),r.lookahead<be&&t===Fe)return W;if(r.lookahead===0)break}if(e=0,r.lookahead>=F&&(r.ins_h=Be(r,r.ins_h,r.window[r.strstart+F-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=F-1,e!==0&&r.prev_length<r.max_lazy_match&&r.strstart-e<=r.w_size-be&&(r.match_length=is(r,e),r.match_length<=5&&(r.strategy===fh||r.match_length===F&&r.strstart-r.match_start>4096)&&(r.match_length=F-1)),r.prev_length>=F&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-F,n=Ue(r,r.strstart-1-r.prev_match,r.prev_length-F),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=Be(r,r.ins_h,r.window[r.strstart+F-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=F-1,r.strstart++,n&&(te(r,!1),r.strm.avail_out===0))return W}else if(r.match_available){if(n=Ue(r,0,r.window[r.strstart-1]),n&&te(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return W}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=Ue(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<F-1?r.strstart:F-1,t===ae?(te(r,!0),r.strm.avail_out===0?qe:wt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:mt},Ch=(r,t)=>{let e,n,i,o,a=r.window;for(;;){if(r.lookahead<=$e){if(ct(r),r.lookahead<=$e&&t===Fe)return W;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=F&&r.strstart>0&&(i=r.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=r.strstart+$e;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);r.match_length=$e-(o-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=F?(e=Ue(r,1,r.match_length-F),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(e=Ue(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),e&&(te(r,!1),r.strm.avail_out===0))return W}return r.insert=0,t===ae?(te(r,!0),r.strm.avail_out===0?qe:wt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:mt},Rh=(r,t)=>{let e;for(;;){if(r.lookahead===0&&(ct(r),r.lookahead===0)){if(t===Fe)return W;break}if(r.match_length=0,e=Ue(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,e&&(te(r,!1),r.strm.avail_out===0))return W}return r.insert=0,t===ae?(te(r,!0),r.strm.avail_out===0?qe:wt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:mt};function we(r,t,e,n,i){this.good_length=r,this.max_lazy=t,this.nice_length=e,this.max_chain=n,this.func=i}var Ut=[new we(0,0,0,0,os),new we(4,4,8,4,Bn),new we(4,5,16,8,Bn),new we(4,6,32,32,Bn),new we(4,4,16,16,ft),new we(8,16,32,32,ft),new we(8,16,128,128,ft),new we(8,32,128,256,ft),new we(32,128,258,1024,ft),new we(32,258,258,4096,ft)],Sh=r=>{r.window_size=2*r.w_size,Ne(r.head),r.max_lazy_match=Ut[r.level].max_lazy,r.good_match=Ut[r.level].good_length,r.nice_match=Ut[r.level].nice_length,r.max_chain_length=Ut[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=F-1,r.match_available=0,r.ins_h=0};function kh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=zr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xh*2),this.dyn_dtree=new Uint16Array((2*_h+1)*2),this.bl_tree=new Uint16Array((2*bh+1)*2),Ne(this.dyn_ltree),Ne(this.dyn_dtree),Ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(yh+1),this.heap=new Uint16Array(2*Wn+1),Ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Wn+1),Ne(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var jt=r=>{if(!r)return 1;let t=r.state;return!t||t.strm!==r||t.status!==ht&&t.status!==ni&&t.status!==qn&&t.status!==Gn&&t.status!==Kn&&t.status!==Xn&&t.status!==He&&t.status!==$t?1:0},as=r=>{if(jt(r))return je(r,_e);r.total_in=r.total_out=0,r.data_type=ch;let t=r.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?ni:t.wrap?ht:He,r.adler=t.wrap===2?0:1,t.last_flush=-2,th(t),V},ss=r=>{let t=as(r);return t===V&&Sh(r.state),t},Ih=(r,t)=>jt(r)||r.state.wrap!==2?_e:(r.state.gzhead=t,V),fs=(r,t,e,n,i,o)=>{if(!r)return _e;let a=1;if(t===sh&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>ph||e!==zr||n<8||n>15||t<0||t>9||o<0||o>lh||n===8&&a!==1)return je(r,_e);n===8&&(n=9);let s=new kh;return r.state=s,s.strm=r,s.status=ht,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+F-1)/F),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=e,ss(r)},Nh=(r,t)=>fs(r,t,zr,dh,mh,hh),$h=(r,t)=>{if(jt(r)||t>la||t<0)return r?je(r,_e):_e;let e=r.state;if(!r.output||r.avail_in!==0&&!r.input||e.status===$t&&t!==ae)return je(r,r.avail_out===0?Fn:_e);let n=e.last_flush;if(e.last_flush=t,e.pending!==0){if(ee(r),r.avail_out===0)return e.last_flush=-1,V}else if(r.avail_in===0&&ca(t)<=ca(n)&&t!==ae)return je(r,Fn);if(e.status===$t&&r.avail_in!==0)return je(r,Fn);if(e.status===ht&&e.wrap===0&&(e.status=He),e.status===ht){let i=zr+(e.w_bits-8<<4)<<8,o=-1;if(e.strategy>=Ir||e.level<2?o=0:e.level<6?o=1:e.level===6?o=2:o=3,i|=o<<6,e.strstart!==0&&(i|=vh),i+=31-i%31,Nt(e,i),e.strstart!==0&&(Nt(e,r.adler>>>16),Nt(e,r.adler&65535)),r.adler=1,e.status=He,ee(r),e.pending!==0)return e.last_flush=-1,V}if(e.status===ni){if(r.adler=0,B(e,31),B(e,139),B(e,8),e.gzhead)B(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),B(e,e.gzhead.time&255),B(e,e.gzhead.time>>8&255),B(e,e.gzhead.time>>16&255),B(e,e.gzhead.time>>24&255),B(e,e.level===9?2:e.strategy>=Ir||e.level<2?4:0),B(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(B(e,e.gzhead.extra.length&255),B(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(r.adler=L(r.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=qn;else if(B(e,0),B(e,0),B(e,0),B(e,0),B(e,0),B(e,e.level===9?2:e.strategy>=Ir||e.level<2?4:0),B(e,Eh),e.status=He,ee(r),e.pending!==0)return e.last_flush=-1,V}if(e.status===qn){if(e.gzhead.extra){let i=e.pending,o=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+o>e.pending_buf_size;){let s=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=s,ee(r),e.pending!==0)return e.last_flush=-1,V;i=0,o-=s}let a=new Uint8Array(e.gzhead.extra);e.pending_buf.set(a.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending+=o,e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Gn}if(e.status===Gn){if(e.gzhead.name){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),ee(r),e.pending!==0)return e.last_flush=-1,V;i=0}e.gzindex<e.gzhead.name.length?o=e.gzhead.name.charCodeAt(e.gzindex++)&255:o=0,B(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Kn}if(e.status===Kn){if(e.gzhead.comment){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),ee(r),e.pending!==0)return e.last_flush=-1,V;i=0}e.gzindex<e.gzhead.comment.length?o=e.gzhead.comment.charCodeAt(e.gzindex++)&255:o=0,B(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i))}e.status=Xn}if(e.status===Xn){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(ee(r),e.pending!==0))return e.last_flush=-1,V;B(e,r.adler&255),B(e,r.adler>>8&255),r.adler=0}if(e.status=He,ee(r),e.pending!==0)return e.last_flush=-1,V}if(r.avail_in!==0||e.lookahead!==0||t!==Fe&&e.status!==$t){let i=e.level===0?os(e,t):e.strategy===Ir?Rh(e,t):e.strategy===uh?Ch(e,t):Ut[e.level].func(e,t);if((i===qe||i===wt)&&(e.status=$t),i===W||i===qe)return r.avail_out===0&&(e.last_flush=-1),V;if(i===mt&&(t===ih?nh(e):t!==la&&(jn(e,0,0,!1),t===oh&&(Ne(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),ee(r),r.avail_out===0))return e.last_flush=-1,V}return t!==ae?V:e.wrap<=0?ha:(e.wrap===2?(B(e,r.adler&255),B(e,r.adler>>8&255),B(e,r.adler>>16&255),B(e,r.adler>>24&255),B(e,r.total_in&255),B(e,r.total_in>>8&255),B(e,r.total_in>>16&255),B(e,r.total_in>>24&255)):(Nt(e,r.adler>>>16),Nt(e,r.adler&65535)),ee(r),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?V:ha)},Uh=r=>{if(jt(r))return _e;let t=r.state.status;return r.state=null,t===He?je(r,ah):V},Fh=(r,t)=>{let e=t.length;if(jt(r))return _e;let n=r.state,i=n.wrap;if(i===2||i===1&&n.status!==ht||n.lookahead)return _e;if(i===1&&(r.adler=Mt(r.adler,t,e,0)),n.wrap=0,e>=n.w_size){i===0&&(Ne(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(e-n.w_size,e),0),t=l,e=n.w_size}let o=r.avail_in,a=r.next_in,s=r.input;for(r.avail_in=e,r.next_in=0,r.input=t,ct(n);n.lookahead>=F;){let l=n.strstart,f=n.lookahead-(F-1);do n.ins_h=Be(n,n.ins_h,n.window[l+F-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--f);n.strstart=l,n.lookahead=F-1,ct(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=F-1,n.match_available=0,r.next_in=a,r.input=s,r.avail_in=o,n.wrap=i,V},Bh=Nh,Oh=fs,Ph=ss,Dh=as,zh=Ih,Lh=$h,Mh=Uh,Vh=Fh,Zh="pako deflate (from Nodeca project)",Bt={deflateInit:Bh,deflateInit2:Oh,deflateReset:Ph,deflateResetKeep:Dh,deflateSetHeader:zh,deflate:Lh,deflateEnd:Mh,deflateSetDictionary:Vh,deflateInfo:Zh},Yh=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),Hh=function(r){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let e=t.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(let n in e)Yh(e,n)&&(r[n]=e[n])}}return r},jh=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;let e=new Uint8Array(t);for(let n=0,i=0,o=r.length;n<o;n++){let a=r[n];e.set(a,i),i+=a.length}return e},Lr={assign:Hh,flattenChunks:jh},us=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){us=!1}var Vt=new Uint8Array(256);for(let r=0;r<256;r++)Vt[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Vt[254]=Vt[254]=1;var Wh=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,o,a=r.length,s=0;for(i=0;i<a;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|e&63):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|e&63):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|e&63);return t},qh=(r,t)=>{if(t<65534&&r.subarray&&us)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e},Gh=(r,t)=>{let e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i,o=new Array(e*2);for(i=0,n=0;n<e;){let a=r[n++];if(a<128){o[i++]=a;continue}let s=Vt[a];if(s>4){o[i++]=65533,n+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&n<e;)a=a<<6|r[n++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return qh(o,i)},Kh=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+Vt[r[e]]>t?e:t},Zt={string2buf:Wh,buf2string:Gh,utf8border:Kh};function Xh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ls=Xh,hs=Object.prototype.toString,{Z_NO_FLUSH:Jh,Z_SYNC_FLUSH:Qh,Z_FULL_FLUSH:ec,Z_FINISH:tc,Z_OK:Pr,Z_STREAM_END:rc,Z_DEFAULT_COMPRESSION:nc,Z_DEFAULT_STRATEGY:ic,Z_DEFLATED:oc}=dt;function Wt(r){this.options=Lr.assign({level:nc,method:oc,chunkSize:16384,windowBits:15,memLevel:8,strategy:ic},r||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ls,this.strm.avail_out=0;let e=Bt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==Pr)throw new Error(We[e]);if(t.header&&Bt.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=Zt.string2buf(t.dictionary):hs.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,e=Bt.deflateSetDictionary(this.strm,n),e!==Pr)throw new Error(We[e]);this._dict_set=!0}}Wt.prototype.push=function(r,t){let e=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?tc:Jh,typeof r=="string"?e.input=Zt.string2buf(r):hs.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),(o===Qh||o===ec)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(i=Bt.deflate(e,o),i===rc)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Bt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Pr;if(e.avail_out===0){this.onData(e.output);continue}if(o>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Wt.prototype.onData=function(r){this.chunks.push(r)};Wt.prototype.onEnd=function(r){r===Pr&&(this.result=Lr.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function ii(r,t){let e=new Wt(t);if(e.push(r,!0),e.err)throw e.msg||We[e.err];return e.result}function ac(r,t){return t=t||{},t.raw=!0,ii(r,t)}function sc(r,t){return t=t||{},t.gzip=!0,ii(r,t)}var fc=Wt,uc=ii,lc=ac,hc=sc,cc=dt,pc={Deflate:fc,deflate:uc,deflateRaw:lc,gzip:hc,constants:cc},Nr=16209,dc=16191,mc=function(t,e){let n,i,o,a,s,l,f,u,h,p,c,g,_,R,T,k,A,x,C,N,v,E,I,S,$=t.state;n=t.next_in,I=t.input,i=n+(t.avail_in-5),o=t.next_out,S=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=$.dmax,f=$.wsize,u=$.whave,h=$.wnext,p=$.window,c=$.hold,g=$.bits,_=$.lencode,R=$.distcode,T=(1<<$.lenbits)-1,k=(1<<$.distbits)-1;e:do{g<15&&(c+=I[n++]<<g,g+=8,c+=I[n++]<<g,g+=8),A=_[c&T];t:for(;;){if(x=A>>>24,c>>>=x,g-=x,x=A>>>16&255,x===0)S[o++]=A&65535;else if(x&16){C=A&65535,x&=15,x&&(g<x&&(c+=I[n++]<<g,g+=8),C+=c&(1<<x)-1,c>>>=x,g-=x),g<15&&(c+=I[n++]<<g,g+=8,c+=I[n++]<<g,g+=8),A=R[c&k];r:for(;;){if(x=A>>>24,c>>>=x,g-=x,x=A>>>16&255,x&16){if(N=A&65535,x&=15,g<x&&(c+=I[n++]<<g,g+=8,g<x&&(c+=I[n++]<<g,g+=8)),N+=c&(1<<x)-1,N>l){t.msg="invalid distance too far back",$.mode=Nr;break e}if(c>>>=x,g-=x,x=o-a,N>x){if(x=N-x,x>u&&$.sane){t.msg="invalid distance too far back",$.mode=Nr;break e}if(v=0,E=p,h===0){if(v+=f-x,x<C){C-=x;do S[o++]=p[v++];while(--x);v=o-N,E=S}}else if(h<x){if(v+=f+h-x,x-=h,x<C){C-=x;do S[o++]=p[v++];while(--x);if(v=0,h<C){x=h,C-=x;do S[o++]=p[v++];while(--x);v=o-N,E=S}}}else if(v+=h-x,x<C){C-=x;do S[o++]=p[v++];while(--x);v=o-N,E=S}for(;C>2;)S[o++]=E[v++],S[o++]=E[v++],S[o++]=E[v++],C-=3;C&&(S[o++]=E[v++],C>1&&(S[o++]=E[v++]))}else{v=o-N;do S[o++]=S[v++],S[o++]=S[v++],S[o++]=S[v++],C-=3;while(C>2);C&&(S[o++]=S[v++],C>1&&(S[o++]=S[v++]))}}else if((x&64)===0){A=R[(A&65535)+(c&(1<<x)-1)];continue r}else{t.msg="invalid distance code",$.mode=Nr;break e}break}}else if((x&64)===0){A=_[(A&65535)+(c&(1<<x)-1)];continue t}else if(x&32){$.mode=dc;break e}else{t.msg="invalid literal/length code",$.mode=Nr;break e}break}}while(n<i&&o<s);C=g>>3,n-=C,g-=C<<3,c&=(1<<g)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<s?257+(s-o):257-(o-s),$.hold=c,$.bits=g},ut=15,pa=852,da=592,ma=0,On=1,wa=2,wc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_c=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),xc=(r,t,e,n,i,o,a,s)=>{let l=s.bits,f=0,u=0,h=0,p=0,c=0,g=0,_=0,R=0,T=0,k=0,A,x,C,N,v,E=null,I,S=new Uint16Array(ut+1),$=new Uint16Array(ut+1),De=null,Ni,nr,ir;for(f=0;f<=ut;f++)S[f]=0;for(u=0;u<n;u++)S[t[e+u]]++;for(c=l,p=ut;p>=1&&S[p]===0;p--);if(c>p&&(c=p),p===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<p&&S[h]===0;h++);for(c<h&&(c=h),R=1,f=1;f<=ut;f++)if(R<<=1,R-=S[f],R<0)return-1;if(R>0&&(r===ma||p!==1))return-1;for($[1]=0,f=1;f<ut;f++)$[f+1]=$[f]+S[f];for(u=0;u<n;u++)t[e+u]!==0&&(a[$[t[e+u]]++]=u);if(r===ma?(E=De=a,I=20):r===On?(E=wc,De=gc,I=257):(E=_c,De=bc,I=0),k=0,u=0,f=h,v=o,g=c,_=0,C=-1,T=1<<c,N=T-1,r===On&&T>pa||r===wa&&T>da)return 1;for(;;){Ni=f-_,a[u]+1<I?(nr=0,ir=a[u]):a[u]>=I?(nr=De[a[u]-I],ir=E[a[u]-I]):(nr=32+64,ir=0),A=1<<f-_,x=1<<g,h=x;do x-=A,i[v+(k>>_)+x]=Ni<<24|nr<<16|ir|0;while(x!==0);for(A=1<<f-1;k&A;)A>>=1;if(A!==0?(k&=A-1,k+=A):k=0,u++,--S[f]===0){if(f===p)break;f=t[e+a[u]]}if(f>c&&(k&N)!==C){for(_===0&&(_=c),v+=h,g=f-_,R=1<<g;g+_<p&&(R-=S[g+_],!(R<=0));)g++,R<<=1;if(T+=1<<g,r===On&&T>pa||r===wa&&T>da)return 1;C=k&N,i[C]=c<<24|g<<16|v-o|0}}return k!==0&&(i[v+k]=f-_<<24|64<<16|0),s.bits=c,0},Ot=xc,yc=0,cs=1,ps=2,{Z_FINISH:ga,Z_BLOCK:vc,Z_TREES:$r,Z_OK:Ge,Z_STREAM_END:Ec,Z_NEED_DICT:Tc,Z_STREAM_ERROR:se,Z_DATA_ERROR:ds,Z_MEM_ERROR:ms,Z_BUF_ERROR:Ac,Z_DEFLATED:_a}=dt,Mr=16180,ba=16181,xa=16182,ya=16183,va=16184,Ea=16185,Ta=16186,Aa=16187,Ca=16188,Ra=16189,Dr=16190,Ee=16191,Pn=16192,Sa=16193,Dn=16194,ka=16195,Ia=16196,Na=16197,$a=16198,Ur=16199,Fr=16200,Ua=16201,Fa=16202,Ba=16203,Oa=16204,Pa=16205,zn=16206,Da=16207,za=16208,O=16209,ws=16210,gs=16211,Cc=852,Rc=592,Sc=15,kc=Sc,La=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Ic(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ke=r=>{if(!r)return 1;let t=r.state;return!t||t.strm!==r||t.mode<Mr||t.mode>gs?1:0},_s=r=>{if(Ke(r))return se;let t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Mr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Cc),t.distcode=t.distdyn=new Int32Array(Rc),t.sane=1,t.back=-1,Ge},bs=r=>{if(Ke(r))return se;let t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,_s(r)},xs=(r,t)=>{let e;if(Ke(r))return se;let n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?se:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,bs(r))},ys=(r,t)=>{if(!r)return se;let e=new Ic;r.state=e,e.strm=r,e.window=null,e.mode=Mr;let n=xs(r,t);return n!==Ge&&(r.state=null),n},Nc=r=>ys(r,kc),Ma=!0,Ln,Mn,$c=r=>{if(Ma){Ln=new Int32Array(512),Mn=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Ot(cs,r.lens,0,288,Ln,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Ot(ps,r.lens,0,32,Mn,0,r.work,{bits:5}),Ma=!1}r.lencode=Ln,r.lenbits=9,r.distcode=Mn,r.distbits=5},vs=(r,t,e,n)=>{let i,o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(e-n,e-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(e-n,e),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Uc=(r,t)=>{let e,n,i,o,a,s,l,f,u,h,p,c,g,_,R=0,T,k,A,x,C,N,v,E,I=new Uint8Array(4),S,$,De=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ke(r)||!r.output||!r.input&&r.avail_in!==0)return se;e=r.state,e.mode===Ee&&(e.mode=Pn),a=r.next_out,i=r.output,l=r.avail_out,o=r.next_in,n=r.input,s=r.avail_in,f=e.hold,u=e.bits,h=s,p=l,E=Ge;e:for(;;)switch(e.mode){case Mr:if(e.wrap===0){e.mode=Pn;break}for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.wrap&2&&f===35615){e.wbits===0&&(e.wbits=15),e.check=0,I[0]=f&255,I[1]=f>>>8&255,e.check=L(e.check,I,2,0),f=0,u=0,e.mode=ba;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((f&255)<<8)+(f>>8))%31){r.msg="incorrect header check",e.mode=O;break}if((f&15)!==_a){r.msg="unknown compression method",e.mode=O;break}if(f>>>=4,u-=4,v=(f&15)+8,e.wbits===0&&(e.wbits=v),v>15||v>e.wbits){r.msg="invalid window size",e.mode=O;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=f&512?Ra:Ee,f=0,u=0;break;case ba:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.flags=f,(e.flags&255)!==_a){r.msg="unknown compression method",e.mode=O;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=O;break}e.head&&(e.head.text=f>>8&1),e.flags&512&&e.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,e.check=L(e.check,I,2,0)),f=0,u=0,e.mode=xa;case xa:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.head&&(e.head.time=f),e.flags&512&&e.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,I[2]=f>>>16&255,I[3]=f>>>24&255,e.check=L(e.check,I,4,0)),f=0,u=0,e.mode=ya;case ya:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.head&&(e.head.xflags=f&255,e.head.os=f>>8),e.flags&512&&e.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,e.check=L(e.check,I,2,0)),f=0,u=0,e.mode=va;case va:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.length=f,e.head&&(e.head.extra_len=f),e.flags&512&&e.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,e.check=L(e.check,I,2,0)),f=0,u=0}else e.head&&(e.head.extra=null);e.mode=Ea;case Ea:if(e.flags&1024&&(c=e.length,c>s&&(c=s),c&&(e.head&&(v=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(o,o+c),v)),e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,c,o)),s-=c,o+=c,e.length-=c),e.length))break e;e.length=0,e.mode=Ta;case Ta:if(e.flags&2048){if(s===0)break e;c=0;do v=n[o+c++],e.head&&v&&e.length<65536&&(e.head.name+=String.fromCharCode(v));while(v&&c<s);if(e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,c,o)),s-=c,o+=c,v)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Aa;case Aa:if(e.flags&4096){if(s===0)break e;c=0;do v=n[o+c++],e.head&&v&&e.length<65536&&(e.head.comment+=String.fromCharCode(v));while(v&&c<s);if(e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,c,o)),s-=c,o+=c,v)break e}else e.head&&(e.head.comment=null);e.mode=Ca;case Ca:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.wrap&4&&f!==(e.check&65535)){r.msg="header crc mismatch",e.mode=O;break}f=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Ee;break;case Ra:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}r.adler=e.check=La(f),f=0,u=0,e.mode=Dr;case Dr:if(e.havedict===0)return r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=f,e.bits=u,Tc;r.adler=e.check=1,e.mode=Ee;case Ee:if(t===vc||t===$r)break e;case Pn:if(e.last){f>>>=u&7,u-=u&7,e.mode=zn;break}for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}switch(e.last=f&1,f>>>=1,u-=1,f&3){case 0:e.mode=Sa;break;case 1:if($c(e),e.mode=Ur,t===$r){f>>>=2,u-=2;break e}break;case 2:e.mode=Ia;break;case 3:r.msg="invalid block type",e.mode=O}f>>>=2,u-=2;break;case Sa:for(f>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){r.msg="invalid stored block lengths",e.mode=O;break}if(e.length=f&65535,f=0,u=0,e.mode=Dn,t===$r)break e;case Dn:e.mode=ka;case ka:if(c=e.length,c){if(c>s&&(c=s),c>l&&(c=l),c===0)break e;i.set(n.subarray(o,o+c),a),s-=c,o+=c,l-=c,a+=c,e.length-=c;break}e.mode=Ee;break;case Ia:for(;u<14;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.nlen=(f&31)+257,f>>>=5,u-=5,e.ndist=(f&31)+1,f>>>=5,u-=5,e.ncode=(f&15)+4,f>>>=4,u-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=O;break}e.have=0,e.mode=Na;case Na:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.lens[De[e.have++]]=f&7,f>>>=3,u-=3}for(;e.have<19;)e.lens[De[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,S={bits:e.lenbits},E=Ot(yc,e.lens,0,19,e.lencode,0,e.work,S),e.lenbits=S.bits,E){r.msg="invalid code lengths set",e.mode=O;break}e.have=0,e.mode=$a;case $a:for(;e.have<e.nlen+e.ndist;){for(;R=e.lencode[f&(1<<e.lenbits)-1],T=R>>>24,k=R>>>16&255,A=R&65535,!(T<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(A<16)f>>>=T,u-=T,e.lens[e.have++]=A;else{if(A===16){for($=T+2;u<$;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f>>>=T,u-=T,e.have===0){r.msg="invalid bit length repeat",e.mode=O;break}v=e.lens[e.have-1],c=3+(f&3),f>>>=2,u-=2}else if(A===17){for($=T+3;u<$;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=T,u-=T,v=0,c=3+(f&7),f>>>=3,u-=3}else{for($=T+7;u<$;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=T,u-=T,v=0,c=11+(f&127),f>>>=7,u-=7}if(e.have+c>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=O;break}for(;c--;)e.lens[e.have++]=v}}if(e.mode===O)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=O;break}if(e.lenbits=9,S={bits:e.lenbits},E=Ot(cs,e.lens,0,e.nlen,e.lencode,0,e.work,S),e.lenbits=S.bits,E){r.msg="invalid literal/lengths set",e.mode=O;break}if(e.distbits=6,e.distcode=e.distdyn,S={bits:e.distbits},E=Ot(ps,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,S),e.distbits=S.bits,E){r.msg="invalid distances set",e.mode=O;break}if(e.mode=Ur,t===$r)break e;case Ur:e.mode=Fr;case Fr:if(s>=6&&l>=258){r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=f,e.bits=u,mc(r,p),a=r.next_out,i=r.output,l=r.avail_out,o=r.next_in,n=r.input,s=r.avail_in,f=e.hold,u=e.bits,e.mode===Ee&&(e.back=-1);break}for(e.back=0;R=e.lencode[f&(1<<e.lenbits)-1],T=R>>>24,k=R>>>16&255,A=R&65535,!(T<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(k&&(k&240)===0){for(x=T,C=k,N=A;R=e.lencode[N+((f&(1<<x+C)-1)>>x)],T=R>>>24,k=R>>>16&255,A=R&65535,!(x+T<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=x,u-=x,e.back+=x}if(f>>>=T,u-=T,e.back+=T,e.length=A,k===0){e.mode=Pa;break}if(k&32){e.back=-1,e.mode=Ee;break}if(k&64){r.msg="invalid literal/length code",e.mode=O;break}e.extra=k&15,e.mode=Ua;case Ua:if(e.extra){for($=e.extra;u<$;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.length+=f&(1<<e.extra)-1,f>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Fa;case Fa:for(;R=e.distcode[f&(1<<e.distbits)-1],T=R>>>24,k=R>>>16&255,A=R&65535,!(T<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((k&240)===0){for(x=T,C=k,N=A;R=e.distcode[N+((f&(1<<x+C)-1)>>x)],T=R>>>24,k=R>>>16&255,A=R&65535,!(x+T<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=x,u-=x,e.back+=x}if(f>>>=T,u-=T,e.back+=T,k&64){r.msg="invalid distance code",e.mode=O;break}e.offset=A,e.extra=k&15,e.mode=Ba;case Ba:if(e.extra){for($=e.extra;u<$;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.offset+=f&(1<<e.extra)-1,f>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=O;break}e.mode=Oa;case Oa:if(l===0)break e;if(c=p-l,e.offset>c){if(c=e.offset-c,c>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=O;break}c>e.wnext?(c-=e.wnext,g=e.wsize-c):g=e.wnext-c,c>e.length&&(c=e.length),_=e.window}else _=i,g=a-e.offset,c=e.length;c>l&&(c=l),l-=c,e.length-=c;do i[a++]=_[g++];while(--c);e.length===0&&(e.mode=Fr);break;case Pa:if(l===0)break e;i[a++]=e.length,l--,e.mode=Fr;break;case zn:if(e.wrap){for(;u<32;){if(s===0)break e;s--,f|=n[o++]<<u,u+=8}if(p-=l,r.total_out+=p,e.total+=p,e.wrap&4&&p&&(r.adler=e.check=e.flags?L(e.check,i,p,a-p):Mt(e.check,i,p,a-p)),p=l,e.wrap&4&&(e.flags?f:La(f))!==e.check){r.msg="incorrect data check",e.mode=O;break}f=0,u=0}e.mode=Da;case Da:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.wrap&4&&f!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=O;break}f=0,u=0}e.mode=za;case za:E=Ec;break e;case O:E=ds;break e;case ws:return ms;case gs:default:return se}return r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=f,e.bits=u,(e.wsize||p!==r.avail_out&&e.mode<O&&(e.mode<zn||t!==ga))&&vs(r,r.output,r.next_out,p-r.avail_out),h-=r.avail_in,p-=r.avail_out,r.total_in+=h,r.total_out+=p,e.total+=p,e.wrap&4&&p&&(r.adler=e.check=e.flags?L(e.check,i,p,r.next_out-p):Mt(e.check,i,p,r.next_out-p)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Ee?128:0)+(e.mode===Ur||e.mode===Dn?256:0),(h===0&&p===0||t===ga)&&E===Ge&&(E=Ac),E},Fc=r=>{if(Ke(r))return se;let t=r.state;return t.window&&(t.window=null),r.state=null,Ge},Bc=(r,t)=>{if(Ke(r))return se;let e=r.state;return(e.wrap&2)===0?se:(e.head=t,t.done=!1,Ge)},Oc=(r,t)=>{let e=t.length,n,i,o;return Ke(r)||(n=r.state,n.wrap!==0&&n.mode!==Dr)?se:n.mode===Dr&&(i=1,i=Mt(i,t,e,0),i!==n.check)?ds:(o=vs(r,t,e,e),o?(n.mode=ws,ms):(n.havedict=1,Ge))},Pc=bs,Dc=xs,zc=_s,Lc=Nc,Mc=ys,Vc=Uc,Zc=Fc,Yc=Bc,Hc=Oc,jc="pako inflate (from Nodeca project)",Ae={inflateReset:Pc,inflateReset2:Dc,inflateResetKeep:zc,inflateInit:Lc,inflateInit2:Mc,inflate:Vc,inflateEnd:Zc,inflateGetHeader:Yc,inflateSetDictionary:Hc,inflateInfo:jc};function Wc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var qc=Wc,Es=Object.prototype.toString,{Z_NO_FLUSH:Gc,Z_FINISH:Kc,Z_OK:Yt,Z_STREAM_END:Vn,Z_NEED_DICT:Zn,Z_STREAM_ERROR:Xc,Z_DATA_ERROR:Va,Z_MEM_ERROR:Jc}=dt;function qt(r){this.options=Lr.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ls,this.strm.avail_out=0;let e=Ae.inflateInit2(this.strm,t.windowBits);if(e!==Yt)throw new Error(We[e]);if(this.header=new qc,Ae.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Zt.string2buf(t.dictionary):Es.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Ae.inflateSetDictionary(this.strm,t.dictionary),e!==Yt)))throw new Error(We[e])}qt.prototype.push=function(r,t){let e=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?Kc:Gc,Es.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),o=Ae.inflate(e,a),o===Zn&&i&&(o=Ae.inflateSetDictionary(e,i),o===Yt?o=Ae.inflate(e,a):o===Va&&(o=Zn));e.avail_in>0&&o===Vn&&e.state.wrap>0&&r[e.next_in]!==0;)Ae.inflateReset(e),o=Ae.inflate(e,a);switch(o){case Xc:case Va:case Zn:case Jc:return this.onEnd(o),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||o===Vn))if(this.options.to==="string"){let l=Zt.utf8border(e.output,e.next_out),f=e.next_out-l,u=Zt.buf2string(e.output,l);e.next_out=f,e.avail_out=n-f,f&&e.output.set(e.output.subarray(l,l+f),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===Yt&&s===0)){if(o===Vn)return o=Ae.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};qt.prototype.onData=function(r){this.chunks.push(r)};qt.prototype.onEnd=function(r){r===Yt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Lr.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function oi(r,t){let e=new qt(t);if(e.push(r),e.err)throw e.msg||We[e.err];return e.result}function Qc(r,t){return t=t||{},t.raw=!0,oi(r,t)}var ep=qt,tp=oi,rp=Qc,np=oi,ip=dt,op={Inflate:ep,inflate:tp,inflateRaw:rp,ungzip:np,constants:ip},{Deflate:hd,deflate:cd,deflateRaw:pd,gzip:dd}=pc,{Inflate:md,inflate:wd,inflateRaw:ap,ungzip:gd}=op;var Ts=ap;function As(r){return Ts(r.subarray(2))}m();w();var ai=class extends Error{constructor(t){super(t),this.code="ERR_ABORTED"}};function Cs(r){r.sort((i,o)=>Number(i.offset)-Number(o.offset));let t=[],e,n;for(let i=0;i<r.length;i+=1)e&&n&&Number(r[i].offset)-n<=2e3?(e.length=BigInt(Number(e.length)+Number(r[i].length)-n+Number(r[i].offset)),e.blocks.push(r[i])):t.push(e={blocks:[r[i]],length:r[i].length,offset:r[i].offset}),n=Number(e.offset)+Number(e.length);return t}function Gt(r){if(!!r&&r.aborted){if(typeof DOMException!="undefined")throw new DOMException("aborted","AbortError");{let t=new ai("aborted");throw t.code="ERR_ABORTED",t}}}var sp=1,fp=2,up=3;function si(r,t,e,n){return r<n&&t>=e}function lp(r){let t=r?"big":"little",e=new U().endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new U().endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new U().endianess(t).array("blocksToFetch",{length:"cnt",type:new U().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new U().array("recurOffsets",{length:"cnt",type:new U().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),i=new U().endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new U().endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[up]:new U().array("items",{length:"itemCount",type:new U().floatle("score")}),[fp]:new U().array("items",{length:"itemCount",type:new U().endianess(t).int32("start").floatle("score")}),[sp]:new U().array("items",{length:"itemCount",type:new U().endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:i,summaryParser:e,leafParser:n}}var gt=class{constructor(t,e,n,i,o,a){if(this.bbi=t,this.refsByName=e,this.cirTreeOffset=n,this.isBigEndian=i,this.isCompressed=o,this.blockType=a,this.featureCache=new Rs.default({cache:new Ss.default({maxSize:1e3}),fill:async(l,f)=>{let u=Number(l.length),h=Number(l.offset),{buffer:p}=await this.bbi.read(b.alloc(u),0,u,h,{signal:f});return p}}),!(n>=0))throw new Error("invalid cirTreeOffset!");let s=lp(i);this.leafParser=s.leafParser,this.bigBedParser=s.bigBedParser}async readWigData(t,e,n,i,o){try{let{refsByName:a,bbi:s,cirTreeOffset:l,isBigEndian:f}=this,u=a[t];u===void 0&&i.complete();let h={chrId:u,start:e,end:n};this.cirTreePromise||(this.cirTreePromise=s.read(b.alloc(48),0,48,Number(l),o));let{buffer:p}=await this.cirTreePromise,c=f?p.readUInt32BE(4):p.readUInt32LE(4),g=[],_=0,R=(x,C,N)=>{try{let v=x.subarray(C),E=this.leafParser.parse(v);if(E.blocksToFetch&&(g=g.concat(E.blocksToFetch.filter(T).map(I=>({offset:I.blockOffset,length:I.blockSize})))),E.recurOffsets){let I=E.recurOffsets.filter(T).map(S=>Number(S.blockOffset));I.length>0&&A(I,N+1)}}catch(v){i.error(v)}},T=x=>{let{startChrom:C,startBase:N,endChrom:v,endBase:E}=x;return(C<u||C===u&&N<=n)&&(v>u||v===u&&E>=e)},k=async(x,C,N)=>{try{let v=C.max()-C.min(),E=C.min(),I=await this.featureCache.get(`${v}_${E}`,{length:v,offset:E},o.signal);for(let S=0;S<x.length;S+=1)C.contains(x[S])&&(R(I,x[S]-E,N),_-=1,_===0&&this.readFeatures(i,g,{...o,request:h}))}catch(v){i.error(v)}},A=(x,C)=>{try{_+=x.length;let N=4+Number(c)*32,v=new oe(x[0],x[0]+N);for(let E=1;E<x.length;E+=1){let I=new oe(x[E],x[E]+N);v=v.union(I)}v.getRanges().map(E=>k(x,E,C))}catch(N){i.error(N)}};return A([Number(l)+48],1)}catch(a){i.error(a)}}parseSummaryBlock(t,e,n){let i=[],o=e,a=new DataView(t.buffer,t.byteOffset,t.length);for(;o<t.byteLength;){let s=a.getUint32(o,!0);o+=4;let l=a.getUint32(o,!0);o+=4;let f=a.getUint32(o,!0);o+=4;let u=a.getUint32(o,!0);o+=4;let h=a.getFloat32(o,!0);o+=4;let p=a.getFloat32(o,!0);o+=4;let c=a.getFloat32(o,!0);o+=4,o+=4,(!n||s===n.chrId&&si(l,f,n.start,n.end))&&i.push({start:l,end:f,maxScore:p,minScore:h,summary:!0,score:c/(u||1)})}return i}parseBigBedBlock(t,e,n,i){let o=[],a=e;for(;a<t.byteLength;){let s=this.bigBedParser.parse(t.subarray(a));o.push({...s,uniqueId:`bb-${n+a}`}),a+=s.offset}return i?o.filter(s=>si(s.start,s.end,i.start,i.end)):o}parseBigWigBlock(t,e,n){let i=t.subarray(e),o=new DataView(i.buffer,i.byteOffset,i.length),a=0;a+=4;let s=o.getInt32(a,!0);a+=8;let l=o.getUint32(a,!0);a+=4;let f=o.getUint32(a,!0);a+=4;let u=o.getUint8(a);a+=2;let h=o.getUint16(a,!0);a+=2;let p=new Array(h);switch(u){case 1:for(let c=0;c<h;c++){let g=o.getInt32(a,!0);a+=4;let _=o.getInt32(a,!0);a+=4;let R=o.getFloat32(a,!0);a+=4,p[c]={start:g,end:_,score:R}}break;case 2:for(let c=0;c<h;c++){let g=o.getInt32(a,!0);a+=4;let _=o.getFloat32(a,!0);a+=4,p[c]={score:_,start:g,end:g+f}}break;case 3:for(let c=0;c<h;c++){let g=o.getFloat32(a,!0);a+=4;let _=s+c*l;p[c]={score:g,start:_,end:_+f}}break}return n?p.filter(c=>si(c.start,c.end,n.start,n.end)):p}async readFeatures(t,e,n={}){try{let{blockType:i,isCompressed:o}=this,{signal:a,request:s}=n,l=Cs(e);Gt(a),await Promise.all(l.map(async f=>{Gt(a);let{length:u,offset:h}=f,p=await this.featureCache.get(`${u}_${h}`,f,a);f.blocks.forEach(c=>{Gt(a);let g=Number(c.offset)-Number(f.offset),_=p;switch(o&&(_=As(p.subarray(g)),g=0),Gt(a),i){case"summary":t.next(this.parseSummaryBlock(_,g,s));break;case"bigwig":t.next(this.parseBigWigBlock(_,g,s));break;case"bigbed":t.next(this.parseBigBedBlock(_,g,Number(c.offset)*(1<<8),s));break;default:console.warn(`Don't know what to do with ${i}`)}})})),t.complete()}catch(i){t.error(i)}}};m();w();m();w();var fi=rt(ks());m();w();var Oe=class{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){let e=await t.arrayBuffer();return b.from(e)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,e={}){this.baseOverrides={},this.url=t;let n=e.fetch||globalThis.fetch.bind(globalThis);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");e.overrides&&(this.baseOverrides=e.overrides),this.fetchImplementation=n}async fetch(t,e){let n;try{n=await this.fetchImplementation(t,e)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(t,{...e,cache:"reload"});else throw i}return n}async read(t,e=0,n,i=0,o={}){let{headers:a={},signal:s,overrides:l={}}=o;n<1/0?a.range=`bytes=${i}-${i+n}`:n===1/0&&i!==0&&(a.range=`bytes=${i}-`);let f={...this.baseOverrides,...l,headers:{...a,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},u=await this.fetch(this.url,f);if(!u.ok)throw new Error(`HTTP ${u.status} ${u.statusText} ${this.url}`);if(u.status===200&&i===0||u.status===206){let h=await this.getBufferFromResponse(u),p=h.copy(t,e,0,Math.min(n,h.length)),c=u.headers.get("content-range"),g=/\/(\d+)$/.exec(c||"");return g&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:p,buffer:t}}throw u.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${u.status} fetching ${this.url}`)}async readFile(t={}){let e,n;typeof t=="string"?(e=t,n={}):(e=t.encoding,n=t,delete n.encoding);let{headers:i={},signal:o,overrides:a={}}=n,s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a},l=await this.fetch(this.url,s);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(e==="utf8")return l.text();if(e)throw new Error(`unsupported encoding: ${e}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){let t=b.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}};m();w();m();w();m();w();m();w();m();w();m();w();var ui=function(r,t){return ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ui(r,t)};function Kt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ui(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function li(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o}function bt(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}m();w();function X(r){return typeof r=="function"}m();w();m();w();m();w();function Vr(r){var t=function(n){Error.call(n),n.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Zr=Vr(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});m();w();function hi(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var Yr=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=li(a),l=s.next();!l.done;l=s.next()){var f=l.value;f.remove(this)}}catch(_){t={error:_}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(X(u))try{u()}catch(_){o=_ instanceof Zr?_.errors:[_]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var p=li(h),c=p.next();!c.done;c=p.next()){var g=c.value;try{Is(g)}catch(_){o=o!=null?o:[],_ instanceof Zr?o=bt(bt([],_t(o)),_t(_.errors)):o.push(_)}}}catch(_){n={error:_}}finally{try{c&&!c.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}if(o)throw new Zr(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Is(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&hi(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&hi(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();var Gd=Yr.EMPTY;function Hr(r){return r instanceof Yr||r&&"closed"in r&&X(r.remove)&&X(r.add)&&X(r.unsubscribe)}function Is(r){X(r)?r():r.unsubscribe()}m();w();var le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};m();w();m();w();var xt={setTimeout:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=xt.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,bt([r,t],_t(e))):setTimeout.apply(void 0,bt([r,t],_t(e)))},clearTimeout:function(r){var t=xt.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function Ns(r){xt.setTimeout(function(){var t=le.onUnhandledError;if(t)t(r);else throw r})}m();w();function ci(){}m();w();var $s=function(){return pi("C",void 0,void 0)}();function Us(r){return pi("E",void 0,r)}function Fs(r){return pi("N",r,void 0)}function pi(r,t,e){return{kind:r,value:t,error:e}}m();w();var Xe=null;function Bs(r){if(le.useDeprecatedSynchronousErrorHandling){var t=!Xe;if(t&&(Xe={errorThrown:!1,error:null}),r(),t){var e=Xe,n=e.errorThrown,i=e.error;if(Xe=null,n)throw i}}else r()}function Os(r){le.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=r)}var Xt=function(r){Kt(t,r);function t(e){var n=r.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Hr(e)&&e.add(n)):n.destination=dp,n}return t.create=function(e,n,i){return new yt(e,n,i)},t.prototype.next=function(e){this.isStopped?mi(Fs(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?mi(Us(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?mi($s,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Yr);var hp=Function.prototype.bind;function di(r,t){return hp.call(r,t)}var cp=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){jr(n)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){jr(n)}else jr(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){jr(e)}},r}(),yt=function(r){Kt(t,r);function t(e,n,i){var o=r.call(this)||this,a;if(X(e)||!e)a={next:e!=null?e:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var s;o&&le.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=function(){return o.unsubscribe()},a={next:e.next&&di(e.next,s),error:e.error&&di(e.error,s),complete:e.complete&&di(e.complete,s)}):a=e}return o.destination=new cp(a),o}return t}(Xt);function jr(r){le.useDeprecatedSynchronousErrorHandling?Os(r):Ns(r)}function pp(r){throw r}function mi(r,t){var e=le.onStoppedNotification;e&&xt.setTimeout(function(){return e(r,t)})}var dp={closed:!0,next:ci,error:pp,complete:ci};m();w();var Ps=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();m();w();m();w();function Ds(r){return r}function zs(r){return r.length===0?Ds:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}var wi=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this,o=wp(t)?t:new yt(t,e,n);return Bs(function(){var a=i,s=a.operator,l=a.source;o.add(s?s.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var n=this;return e=Ls(e),new e(function(i,o){var a=new yt({next:function(s){try{t(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[Ps]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zs(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=Ls(t),new t(function(n,i){var o;e.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();function Ls(r){var t;return(t=r!=null?r:le.Promise)!==null&&t!==void 0?t:Promise}function mp(r){return r&&X(r.next)&&X(r.error)&&X(r.complete)}function wp(r){return r&&r instanceof Xt||mp(r)&&Hr(r)}m();w();function gp(r){return X(r==null?void 0:r.lift)}function Wr(r){return function(t){if(gp(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}m();w();function Ms(r,t,e,n,i){return new _p(r,t,e,n,i)}var _p=function(r){Kt(t,r);function t(e,n,i,o,a,s){var l=r.call(this,e)||this;return l.onFinalize=a,l.shouldUnsubscribe=s,l._next=n?function(f){try{n(f)}catch(u){e.error(u)}}:r.prototype._next,l._error=o?function(f){try{o(f)}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._error,l._complete=i?function(){try{i()}catch(f){e.error(f)}finally{this.unsubscribe()}}:r.prototype._complete,l}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Xt);m();w();var Vs=Vr(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});m();w();function gi(r,t){var e=typeof t=="object";return new Promise(function(n,i){var o=new yt({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){e?n(t.defaultValue):i(new Vs)}});r.subscribe(o)})}m();w();m();w();m();w();function Zs(r,t,e,n,i){return function(o,a){var s=e,l=t,f=0;o.subscribe(Ms(a,function(u){var h=f++;l=s?r(l,u,h):(s=!0,u),n&&a.next(l)},i&&function(){s&&a.next(l),a.complete()}))}}function Ys(r,t){return Wr(Zs(r,t,arguments.length>=2,!1,!0))}var bp=function(r,t){return r.push(t),r};function _i(){return Wr(function(r,t){Ys(bp,[])(r).subscribe(t)})}m();w();var Hs=-2003829722,bi=-2021002517;function xp(r){return new TextDecoder().decode(r)}function js(r){let t=r?"big":"little",e=new U().endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new U().endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new U().endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),i=new U().endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),o=new U().endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:i,totalSummaryParser:n,headerParser:e,isLeafNode:o}}var Jt=class{getHeader(t={}){let e="aborted"in t?{signal:t}:t;return this.headerP||(this.headerP=this._getHeader(e).catch(n=>{throw this.headerP=void 0,n})),this.headerP}constructor(t={}){let{filehandle:e,renameRefSeqs:n=a=>a,path:i,url:o}=t;if(this.renameRefSeqs=n,e)this.bbi=e;else if(o)this.bbi=new Oe(o);else if(i)this.bbi=new fi.default(i);else throw new Error("no file given")}async _getHeader(t){let e=await this._getMainHeader(t),n=await this._readChromTree(e,t);return{...e,...n}}async _getMainHeader(t,e=2e3){let{buffer:n}=await this.bbi.read(b.alloc(e),0,e,0,t),i=this._isBigEndian(n),o=js(i),a=o.headerParser.parse(n),{magic:s,asOffset:l,totalSummaryOffset:f}=a;if(a.fileType=s===bi?"bigbed":"bigwig",l>e||f>e)return this._getMainHeader(t,e*2);if(l){let u=Number(a.asOffset);a.autoSql=xp(n.subarray(u,n.indexOf(0,u)))}if(a.totalSummaryOffset>e)return this._getMainHeader(t,e*2);if(a.totalSummaryOffset){let u=n.subarray(Number(a.totalSummaryOffset)),h=o.totalSummaryParser.parse(u);a.totalSummary={...h,basesCovered:Number(h.basesCovered)}}return{...a,isBigEndian:i}}_isBigEndian(t){let e=t.readInt32LE(0);if(e===Hs||e===bi)return!1;if(e=t.readInt32BE(0),e===Hs||e===bi)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(t,e){let n=t.isBigEndian,i=n?"big":"little",o=[],a={},s=Number(t.unzoomedDataOffset),l=Number(t.chromTreeOffset);for(;s%4!==0;)s+=1;let f=s-l,{buffer:u}=await this.bbi.read(b.alloc(f),0,f,Number(l),e),h=js(n),{keySize:p}=h.chromTreeParser.parse(u),c=new U().endianess(i).string("key",{stripNull:!0,length:p}).uint32("refId").uint32("refSize").saveOffset("offset"),g=new U().endianess(i).skip(p).uint64("childOffset").saveOffset("offset"),_=32,R=async T=>{let k=T;if(k>=u.length)throw new Error("reading beyond end of buffer");let A=h.isLeafNode.parse(u.subarray(k)),{isLeafNode:x,cnt:C}=A;if(k+=A.offset,x)for(let N=0;N<C;N+=1){let v=c.parse(u.subarray(k));k+=v.offset;let{key:E,refId:I,refSize:S}=v,$={name:E,id:I,length:S};a[this.renameRefSeqs(E)]=I,o[I]=$}else{let N=[];for(let v=0;v<C;v+=1){let E=g.parse(u.subarray(k)),{childOffset:I}=E;k+=E.offset,N.push(R(Number(I)-Number(l)))}await Promise.all(N)}};return await R(_),{refsByName:a,refsByNumber:o}}async getUnzoomedView(t){let{unzoomedIndexOffset:e,refsByName:n,uncompressBufSize:i,isBigEndian:o,fileType:a}=await this.getHeader(t);return new gt(this.bbi,n,e,o,i>0,a)}async getFeatureStream(t,e,n,i={scale:1}){await this.getHeader(i);let o=this.renameRefSeqs(t),a;if(i.basesPerSpan?a=await this.getView(1/i.basesPerSpan,i):i.scale?a=await this.getView(i.scale,i):a=await this.getView(1,i),!a)throw new Error("unable to get block view for data");return new wi(s=>{a.readWigData(o,e,n,s,i)})}async getFeatures(t,e,n,i={scale:1}){let o=await this.getFeatureStream(t,e,n,i);return(await gi(o.pipe(_i()))).flat()}};var Qt=class extends Jt{async getView(t,e){let{zoomLevels:n,refsByName:i,fileSize:o,isBigEndian:a,uncompressBufSize:s}=await this.getHeader(e),l=1/t,f=n.length;o||(f-=1);for(let u=f;u>=0;u-=1){let h=n[u];if(h&&h.reductionLevel<=2*l){let p=Number(h.indexOffset);return new gt(this.bbi,i,p,a,s>0,"summary")}}return this.getUnzoomedView(e)}};m();w();var yp=rt(Rn()),vp=rt(kn());m();w();m();w();var Ws={},xi={},yi=34,er=10,vi=13;function Gs(r){return new Function("d","return {"+r.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Ep(r,t){var e=Gs(r);return function(n,i){return t(e(n),i,r)}}function qs(r){var t=Object.create(null),e=[];return r.forEach(function(n){for(var i in n)i in t||e.push(t[i]=i)}),e}function J(r,t){var e=r+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function Tp(r){return r<0?"-"+J(-r,6):r>9999?"+"+J(r,6):J(r,4)}function Ap(r){var t=r.getUTCHours(),e=r.getUTCMinutes(),n=r.getUTCSeconds(),i=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Tp(r.getUTCFullYear(),4)+"-"+J(r.getUTCMonth()+1,2)+"-"+J(r.getUTCDate(),2)+(i?"T"+J(t,2)+":"+J(e,2)+":"+J(n,2)+"."+J(i,3)+"Z":n?"T"+J(t,2)+":"+J(e,2)+":"+J(n,2)+"Z":e||t?"T"+J(t,2)+":"+J(e,2)+"Z":"")}function Ks(r){var t=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function n(h,p){var c,g,_=i(h,function(R,T){if(c)return c(R,T-1);g=R,c=p?Ep(R,p):Gs(R)});return _.columns=g||[],_}function i(h,p){var c=[],g=h.length,_=0,R=0,T,k=g<=0,A=!1;h.charCodeAt(g-1)===er&&--g,h.charCodeAt(g-1)===vi&&--g;function x(){if(k)return xi;if(A)return A=!1,Ws;var N,v=_,E;if(h.charCodeAt(v)===yi){for(;_++<g&&h.charCodeAt(_)!==yi||h.charCodeAt(++_)===yi;);return(N=_)>=g?k=!0:(E=h.charCodeAt(_++))===er?A=!0:E===vi&&(A=!0,h.charCodeAt(_)===er&&++_),h.slice(v+1,N-1).replace(/""/g,'"')}for(;_<g;){if((E=h.charCodeAt(N=_++))===er)A=!0;else if(E===vi)A=!0,h.charCodeAt(_)===er&&++_;else if(E!==e)continue;return h.slice(v,N)}return k=!0,h.slice(v,g)}for(;(T=x())!==xi;){for(var C=[];T!==Ws&&T!==xi;)C.push(T),T=x();p&&(C=p(C,R++))==null||c.push(C)}return c}function o(h,p){return h.map(function(c){return p.map(function(g){return u(c[g])}).join(r)})}function a(h,p){return p==null&&(p=qs(h)),[p.map(u).join(r)].concat(o(h,p)).join(`
`)}function s(h,p){return p==null&&(p=qs(h)),o(h,p).join(`
`)}function l(h){return h.map(f).join(`
`)}function f(h){return h.map(u).join(r)}function u(h){return h==null?"":h instanceof Date?Ap(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:n,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:f,formatValue:u}}m();w();var Je=Ks("	"),Cp=Je.parse,Ei=Je.parseRows,Rp=Je.format,Sp=Je.formatBody,kp=Je.formatRows,Ip=Je.formatRow,Np=Je.formatValue;m();w();m();w();m();w();m();w();m();w();var re="$";function qr(){}qr.prototype=Xs.prototype={constructor:qr,has:function(r){return re+r in this},get:function(r){return this[re+r]},set:function(r,t){return this[re+r]=t,this},remove:function(r){var t=re+r;return t in this&&delete this[t]},clear:function(){for(var r in this)r[0]===re&&delete this[r]},keys:function(){var r=[];for(var t in this)t[0]===re&&r.push(t.slice(1));return r},values:function(){var r=[];for(var t in this)t[0]===re&&r.push(this[t]);return r},entries:function(){var r=[];for(var t in this)t[0]===re&&r.push({key:t.slice(1),value:this[t]});return r},size:function(){var r=0;for(var t in this)t[0]===re&&++r;return r},empty:function(){for(var r in this)if(r[0]===re)return!1;return!0},each:function(r){for(var t in this)t[0]===re&&r(this[t],t.slice(1),this)}};function Xs(r,t){var e=new qr;if(r instanceof qr)r.each(function(s,l){e.set(l,s)});else if(Array.isArray(r)){var n=-1,i=r.length,o;if(t==null)for(;++n<i;)e.set(n,r[n]);else for(;++n<i;)e.set(t(o=r[n],n,r),o)}else if(r)for(var a in r)e.set(a,r[a]);return e}var vt=Xs;m();w();function Gr(){}var Qe=vt.prototype;Gr.prototype=$p.prototype={constructor:Gr,has:Qe.has,add:function(r){return r+="",this[re+r]=r,this},remove:Qe.remove,clear:Qe.clear,values:Qe.keys,size:Qe.size,empty:Qe.empty,each:Qe.each};function $p(r,t){var e=new Gr;if(r instanceof Gr)r.each(function(o){e.add(o)});else if(r){var n=-1,i=r.length;if(t==null)for(;++n<i;)e.add(r[n]);else for(;++n<i;)e.add(t(r[n],n,r))}return e}m();w();m();w();m();w();m();w();m();w();var Up={value:function(){}};function Qs(){for(var r=0,t=arguments.length,e={},n;r<t;++r){if(!(n=arguments[r]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Kr(e)}function Kr(r){this._=r}function Fp(r,t){return r.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}Kr.prototype=Qs.prototype={constructor:Kr,on:function(r,t){var e=this._,n=Fp(r+"",e),i,o=-1,a=n.length;if(arguments.length<2){for(;++o<a;)if((i=(r=n[o]).type)&&(i=Bp(e[i],r.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(r=n[o]).type)e[i]=Js(e[i],r.name,t);else if(t==null)for(i in e)e[i]=Js(e[i],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new Kr(r)},call:function(r,t){if((i=arguments.length-2)>0)for(var e=new Array(i),n=0,i,o;n<i;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],n=0,i=o.length;n<i;++n)o[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,o=n.length;i<o;++i)n[i].value.apply(t,e)}};function Bp(r,t){for(var e=0,n=r.length,i;e<n;++e)if((i=r[e]).name===t)return i.value}function Js(r,t,e){for(var n=0,i=r.length;n<i;++n)if(r[n].name===t){r[n]=Up,r=r.slice(0,n).concat(r.slice(n+1));break}return e!=null&&r.push({name:t,value:e}),r}var Ti=Qs;function tr(r,t){var e,n=Ti("beforesend","progress","load","error"),i,o=vt(),a=new XMLHttpRequest,s=null,l=null,f,u,h=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(r)&&(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=a.ontimeout=p:a.onreadystatechange=function(c){a.readyState>3&&p(c)};function p(c){var g=a.status,_;if(!g&&Pp(a)||g>=200&&g<300||g===304){if(f)try{_=f.call(e,a)}catch(R){n.call("error",e,R);return}else _=a;n.call("load",e,_)}else n.call("error",e,c)}if(a.onprogress=function(c){n.call("progress",e,c)},e={header:function(c,g){return c=(c+"").toLowerCase(),arguments.length<2?o.get(c):(g==null?o.remove(c):o.set(c,g+""),e)},mimeType:function(c){return arguments.length?(i=c==null?null:c+"",e):i},responseType:function(c){return arguments.length?(u=c,e):u},timeout:function(c){return arguments.length?(h=+c,e):h},user:function(c){return arguments.length<1?s:(s=c==null?null:c+"",e)},password:function(c){return arguments.length<1?l:(l=c==null?null:c+"",e)},response:function(c){return f=c,e},get:function(c,g){return e.send("GET",c,g)},post:function(c,g){return e.send("POST",c,g)},send:function(c,g,_){return a.open(c,r,!0,s,l),i!=null&&!o.has("accept")&&o.set("accept",i+",*/*"),a.setRequestHeader&&o.each(function(R,T){a.setRequestHeader(T,R)}),i!=null&&a.overrideMimeType&&a.overrideMimeType(i),u!=null&&(a.responseType=u),h>0&&(a.timeout=h),_==null&&typeof g=="function"&&(_=g,g=null),_!=null&&_.length===1&&(_=Op(_)),_!=null&&e.on("error",_).on("load",function(R){_(null,R)}),n.call("beforesend",e,a),a.send(g==null?null:g),e},abort:function(){return a.abort(),e},on:function(){var c=n.on.apply(n,arguments);return c===n?e:c}},t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return e.get(t)}return e}function Op(r){return function(t,e){r(t==null?e:null)}}function Pp(r){var t=r.responseType;return t&&t!=="text"?r.response:r.responseText}m();w();m();w();function Pe(r,t){return function(e,n){var i=tr(e).mimeType(r).response(t);if(n!=null){if(typeof n!="function")throw new Error("invalid callback: "+n);return i.get(n)}return i}}var Dp=Pe("text/html",function(r){return document.createRange().createContextualFragment(r.responseText)});m();w();var zp=Pe("application/json",function(r){return JSON.parse(r.responseText)});m();w();var Ai=Pe("text/plain",function(r){return r.responseText});m();w();var Lp=Pe("application/xml",function(r){var t=r.responseXML;if(!t)throw new Error("parse error");return t});m();w();m();w();m();w();var ef={},Ci={},Ri=34,rr=10,Si=13;function rf(r){return new Function("d","return {"+r.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Mp(r,t){var e=rf(r);return function(n,i){return t(e(n),i,r)}}function tf(r){var t=Object.create(null),e=[];return r.forEach(function(n){for(var i in n)i in t||e.push(t[i]=i)}),e}function Q(r,t){var e=r+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function Vp(r){return r<0?"-"+Q(-r,6):r>9999?"+"+Q(r,6):Q(r,4)}function Zp(r){var t=r.getUTCHours(),e=r.getUTCMinutes(),n=r.getUTCSeconds(),i=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Vp(r.getUTCFullYear(),4)+"-"+Q(r.getUTCMonth()+1,2)+"-"+Q(r.getUTCDate(),2)+(i?"T"+Q(t,2)+":"+Q(e,2)+":"+Q(n,2)+"."+Q(i,3)+"Z":n?"T"+Q(t,2)+":"+Q(e,2)+":"+Q(n,2)+"Z":e||t?"T"+Q(t,2)+":"+Q(e,2)+"Z":"")}function Xr(r){var t=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function n(h,p){var c,g,_=i(h,function(R,T){if(c)return c(R,T-1);g=R,c=p?Mp(R,p):rf(R)});return _.columns=g||[],_}function i(h,p){var c=[],g=h.length,_=0,R=0,T,k=g<=0,A=!1;h.charCodeAt(g-1)===rr&&--g,h.charCodeAt(g-1)===Si&&--g;function x(){if(k)return Ci;if(A)return A=!1,ef;var N,v=_,E;if(h.charCodeAt(v)===Ri){for(;_++<g&&h.charCodeAt(_)!==Ri||h.charCodeAt(++_)===Ri;);return(N=_)>=g?k=!0:(E=h.charCodeAt(_++))===rr?A=!0:E===Si&&(A=!0,h.charCodeAt(_)===rr&&++_),h.slice(v+1,N-1).replace(/""/g,'"')}for(;_<g;){if((E=h.charCodeAt(N=_++))===rr)A=!0;else if(E===Si)A=!0,h.charCodeAt(_)===rr&&++_;else if(E!==e)continue;return h.slice(v,N)}return k=!0,h.slice(v,g)}for(;(T=x())!==Ci;){for(var C=[];T!==ef&&T!==Ci;)C.push(T),T=x();p&&(C=p(C,R++))==null||c.push(C)}return c}function o(h,p){return h.map(function(c){return p.map(function(g){return u(c[g])}).join(r)})}function a(h,p){return p==null&&(p=tf(h)),[p.map(u).join(r)].concat(o(h,p)).join(`
`)}function s(h,p){return p==null&&(p=tf(h)),o(h,p).join(`
`)}function l(h){return h.map(f).join(`
`)}function f(h){return h.map(u).join(r)}function u(h){return h==null?"":h instanceof Date?Zp(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:n,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:f,formatValue:u}}m();w();var et=Xr(","),ki=et.parse,Yp=et.parseRows,Hp=et.format,jp=et.formatBody,Wp=et.formatRows,qp=et.formatRow,Gp=et.formatValue;m();w();var tt=Xr("	"),Ii=tt.parse,Kp=tt.parseRows,Xp=tt.format,Jp=tt.formatBody,Qp=tt.formatRows,e0=tt.formatRow,t0=tt.formatValue;m();w();function Jr(r,t){return function(e,n,i){arguments.length<3&&(i=n,n=null);var o=tr(e).mimeType(r);return o.row=function(a){return arguments.length?o.response(r0(t,n=a)):n},o.row(n),i?o.get(i):o}}function r0(r,t){return function(e){return r(e.responseText,t)}}var n0=Jr("text/csv",ki);m();w();var i0=Jr("text/tab-separated-values",Ii);var of=(r,t,e)=>e.chrPositions[r].pos+t;function o0(r){let t=[],e={},n={},i=0;for(let o=0;o<r.length;o++){let a=Number(r[o][1]);i+=a;let s={id:o,chr:r[o][0],pos:i-a};t.push(s),n[s.chr]=s,e[r[o][0]]=a}return{chrToAbs:([o,a])=>of(o,a,{chrPositions:n}),cumPositions:t,chrPositions:n,totalLength:i,chromLengths:e}}function a0(r,t){let e={};return e.absToChr=n=>e.chrPositions?absToChr(n,e):null,e.chrToAbs=([n,i]=[])=>e.chrPositions?of(n,i,e):null,Ai(r,(n,i)=>{if(n)t&&t(null);else{let o=Ei(i),a=o0(o);Object.keys(a).forEach(s=>{e[s]=a[s]}),t&&t(e)}})}var af=function(t,...e){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');class n{constructor(o){this.dataConfig=o,this.trackUid=nf.default.nice(),this.bwFileHeader=null,this.bwFile=null,this.TILE_SIZE=1024,this.errorTxt="",this.dataPromises=[],this.dataPromises.push(this.loadChromsizes(o)),this.dataPromises.push(this.loadBBI(o))}loadChromsizes(o){return o.chromSizesUrl?new Promise(a=>{a0(o.chromSizesUrl,s=>{this.chromSizes=s,a()})}):(console.error('Please enter a "chromSizesUrl" field to the data config'),null)}loadBBI(o){return o.url?(this.bwFile=new Qt({filehandle:new Oe(o.url)}),this.bwFile.getHeader().then(a=>{this.bwFileHeader=a})):(console.error('Please enter a "url" field to the data config'),null)}tilesetInfo(o){return this.tilesetInfoLoading=!0,Promise.all(this.dataPromises).then(()=>{this.tilesetInfoLoading=!1;let a={},s=this.chromSizes.totalLength;return a={tile_size:this.TILE_SIZE,max_zoom:Math.ceil(Math.log(s/this.TILE_SIZE)/Math.log(2)),max_width:2**Math.ceil(Math.log(s)/Math.log(2)),min_pos:[0],max_pos:[s]},o&&o(a),a}).catch(a=>{this.tilesetInfoLoading=!1,console.error(a),o&&o({error:`Error parsing bigwig: ${a}`})})}fetchTilesDebounced(o,a){let s={},l=[],f=[];for(let u of a){let h=u.split("."),p=parseInt(h[0],10),c=parseInt(h[1],10);if(Number.isNaN(c)||Number.isNaN(p)){console.warn("Invalid tile zoom or position:",p,c);continue}l.push(u),f.push(this.tile(p,c))}return Promise.all(f).then(u=>{for(let h=0;h<u.length;h++){let p=l[h];s[p]=u[h],s[p].tilePositionId=p}o(s)}),s}tile(o,a){return this.tilesetInfo().then(s=>{let l=+s.max_width/2**+o,f=[],u={tilePos:[a],tileId:"bigwig."+o+"."+a,zoomLevel:o},h=s.min_pos[0]+a*l,p=h,c=s.min_pos[0]+(a+1)*l,g=this.determineScale(p,c),_=(c-p)/this.TILE_SIZE,R=[];for(let A=0;A<this.TILE_SIZE;A++)R.push(p+A*_);let{chromLengths:T,cumPositions:k}=this.chromSizes;for(let A=0;A<k.length;A++){let x=k[A].chr,C=k[A].pos,N=k[A].pos+T[x],v,E;if(C<=p&&p<N)if(c>N)v=p-C,E=N-C,f.push(this.bwFile.getFeatures(x,v,E,{scale:1/g}).then(I=>(I.forEach(S=>{S.startAbs=t.utils.chrToAbs(x,S.start,this.chromSizes),S.endAbs=t.utils.chrToAbs(x,S.end,this.chromSizes)}),I))),p=N;else{v=Math.floor(p-C),E=Math.ceil(c-C),f.push(this.bwFile.getFeatures(x,v,E,{scale:1/g}).then(I=>(I.forEach(S=>{S.startAbs=t.utils.chrToAbs(x,S.start,this.chromSizes),S.endAbs=t.utils.chrToAbs(x,S.end,this.chromSizes)}),I)));break}}return Promise.all(f).then(A=>{let x=A.flat();for(var C=[],N=0;N<this.TILE_SIZE;N++)C.push(null);R.forEach((E,I)=>{if(E<h||E>c)return;let S=x.filter($=>E>=$.startAbs&&E<$.endAbs).map($=>$.score);C[I]=S.length>0?S[0]:null}),u.min_value=Math.min(...C),u.max_value=Math.max(...C);let v=new t.utils.DenseDataExtrema1D(C);return u.dense=C,u.denseDataExtrema=v,u.minNonZero=v.minNonZeroInTile,u.maxNonZero=v.maxNonZeroInTile,u})})}determineScale(o,a){let s=[1],l=a-o;this.bwFileHeader.zoomLevels.forEach(u=>{s.push(u.reductionLevel)});for(var f=0;f<s.length;f++){let u=s[f];if(l/u<=this.TILE_SIZE*20)return u}return s.slice(-1)[0]}}return new n(...e)};af.config={type:"bbi"};var s0=af;export{s0 as BigwigDataFetcher};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
//# sourceMappingURL=index.min.js.map
